<!DOCTYPE html>
<html>
<!-- 2015/3/2 -->
<!-- 新增超時錯誤動作判斷、整理code -->
	<head>
		<meta charset="utf-8"/>
  		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1.5, user-scalable=1">
  		<title>Start</title>
		<link rel="stylesheet" type="text/css" href="css/page.css"/>
		<link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.2.0.css" >
		<link rel="stylesheet" type="text/css" href="css/flexslider.css" >
		<link rel="stylesheet" type="text/css" href="css/login/style.css" /> 
		<link rel="stylesheet" type="text/css" href="css/start/style.css"> 
		<link rel="stylesheet" type="text/css" href="css/learn/style.css"> 
		<link rel="stylesheet" type="text/css" href="css/ready/style.css"> 
		<link rel="stylesheet" type="text/css" href="css/doing/style.css" />
		<link rel="stylesheet" type="text/css" href="css/show/style.css" />
		<link rel="stylesheet" type="text/css" href="css/track.css" />

		<script src="js/cordova.js"></script>
		<script src="js/jquery-1.8.2.min.js"></script>
		<script src="js/jquery.mobile-1.2.0.min.js"></script>
		<script src="js/jquery.flexslider-min.js"></script>	
		<script type="text/javascript" charset="utf-8" src="js/video.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/bluetooth.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/page.js"></script>

		<script type="text/javascript">
			$(window).load(function(){
  				$('.flexslider').flexslider({
    				animation : "fade",
    				direction : "horizontal",
    				animationSpeed : 1000,
    				slideshow : false
  				});
     		});
     		localStorage.setItem("get_index", "i");
			document.addEventListener("deviceready", onDeviceReady, false);    
    		var db = window.openDatabase("Dummy_DB", "1.0", "Dummy_DB", 200000); 
    		var tab ="&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp"; //x: y: z: 間距用	
			var tabb = "&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp"; //mySql data-head用
			var tabbb = tabb + "&nbsp&nbsp&nbsp&nbsp&nbsp";  //mySql data-detail用
		    var tabl = "&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp"; //mySql data-head用
		    var side_global = 0;
		    var level_global = 0;
		    var firsttime = 0;     //第一次split的x不要理他

		    
		    var xyz = new Array(); //外接硬體的xyz數據
		    var errortime = 0;     //確保達到2000時不會關閉兩次
		    var tempid ;
		    var id_count;      //上傳server個人index count
		    var reha_name;     //復健動作名稱
		    var fd ;           //日期
		    var ft ;           //結束時間 
		    var Startime;      //開始時間
		    var tool_choose = 0;
        	var tempdata = new Array();//放處方籤資料
        	var tempdata2 = new Array(); // 放日期資料
        	var tempdata3 = new Array(); // 放日期資料
        	var d = new Date();
		    var year = d.getFullYear();
			var month = d.getMonth()+1;
			var date = d.getDate();
			var hour = d.getHours();
			var minute = d.getMinutes();
			var second = d.getSeconds();
			var userId;
			var ttt4;
		    var type;          //動作類型(細分6種)
		    var degree;        //角度
		    var num;       	   //建議次數
		    var count;         //成功次數
		    var error_count;   //失敗次數
		    var f_count;   //失敗次數
			var watchID = null;
			var pe_frequency;    //Pebble傳值的頻率
			var test = 0;  //動作程序到哪
			var cc = 0;    //點我返回點到哪
			var Shour;   //記錄開始的時間
			var Sminute;
			var Ssecond;
			var processlength;   //進度條的單位長度
			var ear_count;       //目前無用(前人所用)
			var more = false;    //避免開始鍵第二次產生作用
			
			// 測試用
			var test_count = 1;

			// 動作判斷常數
			// type1 : 上舉
			// type2 : 下放
			// type3 : 右手摸肩
			// type4 : 左手摸肩
			// type5 : 右手摸耳朵
			// type6 : 左手摸耳朵

			// 上舉的部分
			var type1_start_lowerbound_x = 7.39;
			var type1_start_upperbound_x = 9.42;
			var type1_start_lowerbound_y = -6.2;
			var type1_start_upperbound_y = -4.4;
			var type1_fail_lowerbound_z = 7;
			var type1_fail_upperbound_y = -7;
			// 90度
			var type1_90_success_lowerbound_y = 0.88;
			var type1_90_success_upperbound_y = 2.33;
			// 120度
			var type1_120_success_lowerbound_y = 5.47;
			var type1_120_success_upperbound_y = 6.97;
			// 180度
			var type1_180_success_lowerbound_y = 9.38;
			var type1_180_success_upperbound_y = 9.8;

			// 下放的部分
			var type2_start_lowerbound_x = 8.5;
			var type2_start_upperbound_x = 9.5;
			var type2_start_lowerbound_y = -5.0;
			var type2_start_upperbound_y = -1.0;
			var type2_fail_lowerbound_z = 6;
			var type2_success_lowerbound_x = 6.0;
			var type2_success_upperbound_x = 7.5;
			var type2_success_lowerbound_y = -7.0;
			var type2_success_upperbound_y = -5.0;

			// 摸肩、摸耳朵的部分
			// 右手開始
			var type34_start_lowerbound_x = 0.38;
			var type34_start_upperbound_x = 2.53;
			var type34_start_lowerbound_y = -4.23;
			var type34_start_upperbound_y = -1.87;
			var type34_start_lowerbound_z = -9.61;
			var type34_start_upperbound_z = -9.07;
			// 右手摸肩
			var type3_success_lowerbound_x = 3.6;
			var type3_success_upperbound_x = 5.89;
			var type3_success_lowerbound_y = 6.74;
			var type3_success_upperbound_y = 8.23;
			var type3_success_lowerbound_z = -5.09;
			var type3_success_upperbound_z = 3.98;
			// 右手摸耳朵
			var type4_success_lowerbound_x = 1.64;
			var type4_success_upperbound_x = 5.66;
			var type4_success_lowerbound_y = 7.81;
			var type4_success_upperbound_y = 9.42;
			var type4_success_lowerbound_z = 1.07;
			var type4_success_upperbound_z = 2.79;
			// 左手開始
			var type56_start_lowerbound_x = -4.06;
			var type56_start_upperbound_x = -2.48;
			var type56_start_lowerbound_y = -1.45;
			var type56_start_upperbound_y = -0.57;
			var type56_start_lowerbound_z = -9.73;
			var type56_start_upperbound_z = -8.88;
			// 左手摸肩
			var type5_success_lowerbound_x = -4.02;
			var type5_success_upperbound_x = -2.6;
			var type5_success_lowerbound_y = 8.84;
			var type5_success_upperbound_y = 9.65;
			var type5_success_lowerbound_z = -2.98;
			var type5_success_upperbound_z = 3.7;
			// 左手摸耳朵
			var type6_success_lowerbound_x = -2.48;
			var type6_success_upperbound_x = -0.26;
			var type6_success_lowerbound_y = 8.46;
			var type6_success_upperbound_y = 9.65;
			var type6_success_lowerbound_z = 1.22;
			var type6_success_upperbound_z = 3.48;

			// 動作判斷常數
			// type7 : 前抬腿
			// type8 : 挺腹
			// type9 : 側抬腿

			// 踢腿(前抬腿)
		    var type7_start_upperbound_x = 1.27;
		    var type7_start_lowerbound_y = -10.15;
		    var type7_start_upperbound_y = -7.51;
		    var type7_start_upperbound_z = 3.49;
		    var type7_fail_lowerbound_x = 4;
		    var type7_success_lowerbound_y = -3.21;
		    var type7_success_lowerbound_z = 7.96;
		    // 挺腹
		    var type8_start_lowerbound_x = 5;
		    var type8_start_upperbound_x = 7;
		    var type8_start_lowerbound_y = 6;
		    var type8_start_upperbound_y = 8;
		    var type8_fail_lowerbound_z = 4;
		    var type8_success_lowerbound_x = 2.82;
		    var type8_success_upperbound_x = 4.47;
		    var type8_success_lowerbound_y = 8.37;
		    var type8_success_upperbound_y = 9.51;
		    // 側抬腿(右)
		    var type9_right_start_upperbound_x = 2.45;
		    var type9_right_start_lowerbound_y = 8.12;
		    var type9_right_start_upperbound_z = 2.34;
		    var type9_right_fail_lowerbound_x = 6;
		    var type9_right_success_lowerbound_y = 7.31;
		    var type9_right_success_lowerbound_z = 3.48;
		    // 側抬腿(左)
		    var type9_left_start_upperbound_x = 2.95;
		    var type9_left_start_lowerbound_y = 8.23;
		    var type9_left_start_upperbound_z = 2.29;
		    var type9_left_fail_lowerbound_x = 6;
		    var type9_left_success_lowerbound_y = 7.08;
		    var type9_left_success_lowerbound_z = 3.55;
			// 側上斜舉的部分
			// 右手開始
			var type10_start_lowerbound_x = 7.39;
			var type10_start_upperbound_x = 9.42;
			var type10_start_lowerbound_y = -6.2;
			var type10_start_upperbound_y = -4.4;
			var type10_start_lowerbound_z = -1;
			var type10_start_upperbound_z = 0;
			var type10_start_bound_Gx = 0.1;
			var type10_start_bound_Gy = 0.1;
			var type10_start_bound_Gz = 0.1;
			var type10_fail_lowerbound_z = 7;
			var type10_fail_upperbound_y = -7;
			// 右手斜舉90度
			var type10_success_lowerbound_x = 8;
			var type10_success_upperbound_x = 10;
			var type10_success_lowerbound_y = 0;
			var type10_success_upperbound_y = 1;
			var type10_success_lowerbound_z = 0;
			var type10_success_upperbound_z = 1;
			var type10_success_bound_Gx = 0.2;
			var type10_success_bound_Gy = 0.2;
			var type10_success_bound_Gz = 0.2;
			// 計時用
			var time_counter = 0;
			var time_limit = 1300;
    		// 重力球變數
            var watch = 0;
            var cnv;
            var target;
            var xPos;
            var yPos;
            var inixPos;
            var iniyPos;
            var canvas;
            var is=0;
    		function onDeviceReady(){             
		        db.transaction(populateDB, errorCB, successCB);
		        document.addEventListener("backbutton", onBackKeyDown, false);
		        document.addEventListener("deviceready", loadBluetoothPlugin, false);
				document.addEventListener("deviceready", loadGyroscopePlugin, false);
		        playback();
		        playmusic();
		        fd = year+"/"+month+"/"+date; 
		        ttt4 = String(fd);
		        $('.flexslider').flexslider({
    				animation: "fade",
    				direction: "horizontal",
    				animationSpeed: 1000,
    				slideshow: false,
    				smoothHeight: true
  				});
    				hasID();	
    // 			$( "#gbutton" ).click(function() {
	            	
				// 	init();
				// });	
      		}
//---------------------------------------------重力球----------------------
            function init()
            {    
                var iW = window.innerWidth;
                var iH = window.innerHeight;
                canvas= document.getElementById('myCanvas');
                cnv = canvas.getContext("2d");
                cnv.canvas.width = iW;
                cnv.canvas.height = iH-40;
                target = new Image();
                target.src = "ball.png";
                target.width= iW*0.2;
                target.height = iW*0.2;
                inixPos = (iW-target.width)/2;
                iniyPos = (iH-target.height)/2-iH*0.08;
                xPos = (iW-target.width)/2;
                yPos = (iH-target.height)/2-iH*0.08;
                target.onload = function()
                {
                    cnv.drawImage(target, xPos, yPos);
                }
                if(is==0){
                	watch = navigator.accelerometer.watchAcceleration(success_ball, failure_ball, {frequency: 30});
                	is++
                }
                
                
            }

            function success_ball(accel)
            {
    //         	var height = $(window).height();
				// var width = $(window).width();
				var iW = window.innerWidth;
    //             var iH = window.innerHeight;

                cnv.clearRect(0, 0, canvas.width, canvas.height);

                xPos += -1*(accel.x * 3);
		        yPos += (accel.y * 3);
				
                if(xPos < 0){
                	xPos=0;
                
                }else if(xPos > canvas.width-target.width){
		            xPos = canvas.width-target.width;
		         
                }
                if( yPos < 0 ){
                	yPos=0;
               
                }else if(yPos > canvas.height-target.height){
		            yPos = canvas.height-target.height;
		           
                }
                
                if(Math.sqrt((xPos-inixPos)*(xPos-inixPos)+(yPos-iniyPos)*(yPos-iniyPos)) > iW*0.3 && Math.sqrt((xPos-inixPos)*(xPos-inixPos)+(yPos-iniyPos)*(yPos-iniyPos)) < iW*0.34){
                	navigator.notification.vibrate(500);	
                }
                if(Math.sqrt((xPos-inixPos)*(xPos-inixPos)+(yPos-iniyPos)*(yPos-iniyPos)) > iW*0.48 && Math.sqrt((xPos-inixPos)*(xPos-inixPos)+(yPos-iniyPos)*(yPos-iniyPos)) < iW*0.52){
                	navigator.notification.vibrate(500);	
                }
                cnv.drawImage(target, xPos, yPos); 
                   
            }

            function failure_ball()
            {
                alert("Error");
            }
//-----------------------------------重力球結束-------------------------------------------------
    		// 取消手機預設的返回鍵功能
    		function onBackKeyDown() {    
      			window.location.href = "index.html";
      		}    

      		// load pebble bluetooth plugin
      		function loadBluetoothPlugin(){
		      	window.plugins = {
		            BluetoothPlugin: cordova.require( 'cordova/plugin/bluetooth' ),
		            VideoPlayer:cordova.require("cordova/plugin/videoplayer")
		        };
		    }
			function loadGyroscopePlugin(){
				watchID_g = null;
				var option_g ={
					frequency: 1
				};
				watchID_g = navigator.gyroscope.watchAngularSpeed(OnSuccess_g,OnError_g,option_g);
			}
			function update()
			{
			    var total = (count + error_count);
			    $.ajax(
			    {
			        url:"http://health.ncu.cc/isupload.php?command=add",
			        type:"POST",
			        data: {
			        data: '{"id":"' + tempid + '","date":"' + fd + '","starttime":"' + Startime + '","endtime":"' + ft + '","action":"' + type + '","angle":"' + degree + '","suggest":"' + num + '","success":"' + count + '","fail":"' + error_count + '","total":"' + total + '","count":"' + id_count + '"}'
			        },
			        dataType:"html",
			        success:function(b){
			        	alert("上傳成功!!");
			        },
			        fail:function(b) {
			        	alert("上傳失敗，請確認網路連線狀況。" );
			        }
			    });
			}

			function uploadALL(){
			    db.transaction(function(tx){    
			        tx.executeSql('SELECT * FROM Score',[],function(tx,rs){           
			            $.each(rs.rows,function(index){
			              var row = rs.rows.item(index);
			                if(row['date'] == null){
			                  // do nothing
			                  // 這是登入用name欄位(其他為null 所以不上傳)
			                }
							else{
								$.ajax(
			                    {
									url :"http://health.ncu.cc/isupload.php?command=add",
									type :"POST",
									data : {
									data : '{"id":"' + row['name'] + '","date":"' + row['date'] + '","starttime":"' + row['starttime'] + '  ","endtime":"' + row['endtime'] + '","action":"' + row['action'] + '","angle":"' + row['angle'] + '","suggest":"' + row['suggest'] + '","success":"' + row['success'] + '","fail":"' + row['fail'] + '","total":"' + row['total'] + '","count":"' + (row['id']-1) + '"}'
									},
									dataType : "html",
									success : function(b){
										alert("上傳成功!!");
									},
									fail : function(b) {
										alert( "Request failed: " + b );
									}
								});
							}
						});
					}); 
				}); 
			}  
		   //***************************mySQL*************************** 
		   
		    //create table 
		    function populateDB(tx) {    
		      tx.executeSql('CREATE TABLE IF NOT EXISTS Score (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT,date TEXT,starttime TEXT,endtime TEXT,action INTEGER,angle INTEGER,suggest INTEGER,success INTEGER,fail INTEGER,total INTEGER)');         
		    }

		    //function will be called when an error occurred
		    function errorCB(err) {
		      alert("Error processing SQL: " + err.code);
		    }

		    //function will be called when process succeed and then show old record
		    function successCB() { 
		      refresh();       
		    }
		    
		    //insert record into SoccerPlayer sql
		    function insert(a,b,c,d,e,f,g,h,i,j){
		      db.transaction(
		        function(tx){  
		          tx.executeSql('INSERT INTO Score(name, date,starttime,endtime,action,angle,suggest,success,fail,total) VALUES (?,?,?,?,?,?,?,?,?,?)', [a,b,c,d,e,f,g,h,i,j]);  
		        }, 
		        errorCB, 
		        function(){                                                
		          refresh();                                   
		        });          
		    }
		    
		    //ready to show data to record page
		    function refresh(){
		     db.transaction(queryDB,errorCB);
		    }

		    //select all data from SoccerPlayer
		    function queryDB(tx){
		     tx.executeSql('SELECT * FROM Score',[],querySuccess,errorCB);
		   }

    		//fetch data one by one and put it to record page
   			function querySuccess(tx,result){
      			var a = 1;
		        var b;
		        $('#SoccerPlayerList').empty();
		        $.each(result.rows,function(index){
	        		var row = result.rows.item(index);
			        if(index == 0){
			          //不顯示只有name的欄位(第一次登入ID用)
			        }else{
			        	if(a == 1){
				            $('#SoccerPlayerList').append('<li class="track-date">' + row['date'] + '</li>');
				            a = 2;    
				            b = row['date'];
			            }else{
				            if(b != row['date']){
				              $('#SoccerPlayerList').append('<li class="track-date">' + row['date'] + '</li>');
				            }              
			            b = row['date'];
			            }
			            switch(row['action']){
				            case 0:
				            	reha_name = "上舉," + row['angle'] + "°";
				            break;
				            case 1:
				            	reha_name = "下放";
				            break;
				            case 2:
				            	reha_name = "右手摸耳,到肩膀";
				            break;
				            case 3:
				            	reha_name = "左手摸耳,到肩膀";
				            break;
				            case 4:
				            	reha_name = "右手摸耳";
				            break;
				            case 5:
				            	reha_name = "左手摸耳";
				            break;
				            case 6:
				            	reha_name = "踢腿";
				            break;
				            case 7:
				            	reha_name = "挺腹";
				            break;
				            case 8:
				            	reha_name = "側抬腿";
				            break;
							case 10:
								reha_name = "側上斜舉";
							break;
			            }                  
			            $('#SoccerPlayerList').append('<li class="track-detail"><label class="track-1">' + row['starttime'] + '</label><label class="track-2">' + reha_name + '</label><label class="track-3">' + row['suggest'] + ' times</label></li>');
			        }
		        });
		    }

		    function addUserID(){
		    	tempid = document.getElementById('text_id').value;
		    	userId = tempid;
		      	if(tempid.length != 7){
		        	alert("請再次確認，並重新輸入");
		        	return false; 
		    	}
		    	db.transaction(
			        function(tx){  
			        	tx.executeSql('INSERT INTO Score (name) VALUES (?)', [tempid]);   
			        	id_count = 0;          
			        }, 
		        	errorCB, 
		        	function(){                                                
		          		refresh();                                   
		        	}); 
		      	$.mobile.changePage("#main-page", null, true, true);          
		    }  


		    function hasID(){
		      	db.transaction(function(tx){    
		        tx.executeSql('SELECT * FROM Score',[],function(tx,rs){           
		            for(var i = 0 ; i < rs.rows.length ; i++){ 
		                if(rs.rows.item(i)['name'] != null){
		                  	tempid = rs.rows.item(i)['name'];
		                  	id_count = (rs.rows.length - 1);   //找到目前的database index		                  	
		                 	//alert('Hi ' + rs.rows.item(i)['name']);
		                 	userId = rs.rows.item(i)['name'];
		                 	$.mobile.changePage("#main-page", null, true, true);
		                  	return;
		                }
		            }
		            alert("第一次登入，請輸入ID。");
		        }); 
		      }); 
		    }

			function getStartime(){
				var Stime = new Date();   ///開始時間
			  	Shour = Stime.getHours();
			  	Sminute = Stime.getMinutes();
			  	Ssecond = Stime.getSeconds();
				if(Shour < 10){
					Shour = "0" + Shour;
				}
				if(Sminute < 10){
					Sminute = "0" + Sminute;
				}
				if(Ssecond < 10){
					Ssecond = "0" + Ssecond;
				}
				Startime = Shour + ":" + Sminute + ":" + Ssecond;
			}


			// 動作初始化設定
			function startWatch() {
				$('.d').removeClass('ui-btn-active');
				alert("復健即將開始，請準備就定位！");
			 	getStartime();
			 	acce = 0;
			 	count = 0;
				error_count = 0;
				test = 0;
				f_count = 0;
			    var options = { frequency : 1 }; // 每1ms更新
			   	watchID = navigator.accelerometer.watchAcceleration(onSuccess, onError, options);
			    loopback();
			   	setTimeout(function() {          //1秒後播請就定位音樂
				    r_media.play(); 	    
				    r_media.seekTo(0);  
			  	}, 1000);
			}
		    function loadActionData(){

		    	 	var querys ="tool_choose="+tool_choose+"&" +"patient_id="+userId;
		    	 	$.ajax(
				    {
				        url:"http://health.ncu.cc/get_suggest_value.php",
				        type: 'GET',
						data: querys,
						dataType: 'json',
				        success:function(json){
				        	
				        	for (i = 0; i < json.length; i++){
				        		tempdata[i] = new Array(4);
				        		// if(json[i]["day"]==fd){
					        		
									
					        		tempdata[i][0]=json[i]["action"];
					        		tempdata[i][1]=json[i]["times"];
					        		tempdata[i][2]=json[i]["angle"];
					        		tempdata[i][3]=json[i]["day"];
					        				        		// }else{
				        		// 	tempdata[i][0]=-1;
					        	// 	tempdata[i][1]=-1;
					        	// 	tempdata[i][2]=-1;
				        		// }
  								
				        		
	
				        		// var a1 = json[i]["action"];
				        		// var a2 = json[i]["times"];
				        		// var a3 = json[i]["angle"];
				        		// switch(Number(json[i]["action"]) ){
				        		// 	case 0:  //上舉
					        	// 		var temp = '<button  onclick=getdetail2("' + i + '") >' + "動作: 上舉  角度:"+ a3+" 次數: "+ a2 + "</button>";
					        	// 		$('#glist').append(temp);

					        	// 		break;
				        		// 	case 1:  //下放
				        		// 		var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 下放 "+" 次數: "+ a2 + "</button>";
				        		// 		$('#glist').append(temp);
				        		// 		break;
				        		// 	case 2:  //右手摸肩
				        		// 		var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 右手摸肩 "+" 次數: "+ a2 + "</button>";
				        		// 		$('#glist').append(temp);
				        		// 		break;
				        		// 	case 3:  //左手摸肩
				        		// 		var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 左手摸肩 "+" 次數: "+ a2 + "</button>";
				        		// 		$('#glist').append(temp);
				        		// 		break;
				        		// 	case 4:  //右手摸耳
				        		// 		var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 右手摸耳 "+" 次數: "+ a2 + "</button>";
				        		// 		$('#glist').append(temp);
				        		// 		break;
				        		// 	case 5:  //左手摸耳
				        		// 		var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 左手摸耳 "+" 次數: "+ a2 + "</button>";
				        		// 		$('#glist').append(temp);
				        		// 		break;
				        		// 	case 6:  //踢腿
				        		// 		var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 踢腿 "+" 次數: "+ a2 + "</button>";
				        		// 		$('#glist').append(temp);
				        		// 		break;
				        		// 	case 7:  //挺腹
				        		// 		var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 挺腹 "+" 次數: "+ a2 + "</button>";
				        		// 		$('#glist').append(temp);
				        		// 		break;
				        		// 	case 8:  //側抬腿
				        		// 		var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 側抬腿 "+" 次數: "+ a2 + "</button>";
				        		// 		$('#glist').append(temp);
				        		// 		break;
				        		// }
								
				        	}
				        	// $("#glist").trigger('create');

				        },
				        fail:function(b) {
				        	alert("失敗" );
				        }
				    });

					loadActionData2();
					

		    }
		    function loadActionData2(){
		    	$("#glist").empty();
		    	var ttt3;
		    	
		    	var ttt2 = ttt4.split("/",3);
		    	if( Number(ttt2[1])<10){
		    		ttt3 = ttt2[0]+"%2F0"+ttt2[1]+"%2F"+ttt2[2];
		    	}else{
		    		ttt3 = ttt2[0]+"%2F"+ttt2[1]+"%2F"+ttt2[2];
		    	}
	
		    	
		    	var querys = "day="+ttt3+"&patient_id="+userId;
				
				
					$.ajax(
				    {
				        url:"http://health.ncu.cc/get_update_value.php?command=phone",
				        type: 'GET',
						data: querys,
						dataType: 'json',
				        success:function(json2){
				        	// $("#glist").empty();
				        	// for (var k = 0; k <= json2.length; k++){
				        	// 	tempdata3
				        	// }

				        	for (var k = 0; k < json2.length; k++){
				        		
				        		for (var j = 0; j < tempdata.length; j++){
				        			
				        			// tempdata2 = tempdata[j][3].split("-",3);
				        			tempdata3[k] = new Array(2);
				        			// var tg = tempdata2[0]+"/"+tempdata2[1]+"/"+tempdata2[2];
				        			tempdata3[k][0] = json2[k]["action"];
				        			tempdata3[k][1]  = json2[k]["angle"];
				        			
				        			if(tempdata3[k][0] == tempdata[j][0] && tempdata3[k][1] == tempdata[j][2] ){
				        				
				        				var tempss = Number(tempdata[j][1])-  Number(json2[k]["total"]);
				        				
				        				tempdata[j][1] =  String(tempss);
				        				
				        			}
				        		}	
				        	}
				        	
				        	for (i = 0; i < tempdata.length ; i++){
				        		
				        		// if(Number(tempdata[i][0]) == 0 || Number(tempdata[i][0]) == 1 || Number(tempdata[i][0]) == 2 || Number(tempdata[i][0]) ==3 ||Number(tempdata[i][0]) == 4 || Number(tempdata[i][0]) ==5||Number(tempdata[i][0]) ==6||Number(tempdata[i][0]) ==7 ||Number(tempdata[i][0]) == 8){
				        			if(Number(tempdata[i][1])<= 0){

				        			}else{
				        				switch(Number(tempdata[i][0]) ){

						        			case 0:  //上舉
							        			var temp = '<button  onclick=getdetail2("' + i + '") >' + "動作: 上舉  角度:"+ tempdata[i][2]+" 次數: "+ tempdata[i][1] + "</button>";
							        			$('#glist').append(temp);

							        			break;
						        			case 1:  //下放
						        				var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 下放 "+" 次數: "+ tempdata[i][1]+ "</button>";
						        				$('#glist').append(temp);
						        				break;
						        			case 2:  //右手摸肩
						        				var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 右手摸肩 "+" 次數: "+ tempdata[i][1] + "</button>";
						        				$('#glist').append(temp);
						        				break;
						        			case 3:  //左手摸肩
						        				var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 左手摸肩 "+" 次數: "+ tempdata[i][1]+ "</button>";
						        				$('#glist').append(temp);
						        				break;
						        			case 4:  //右手摸耳
						        				var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 右手摸耳 "+" 次數: "+ tempdata[i][1] + "</button>";
						        				$('#glist').append(temp);
						        				break;
						        			case 5:  //左手摸耳
						        				var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 左手摸耳 "+" 次數: "+ tempdata[i][1] + "</button>";
						        				$('#glist').append(temp);
						        				break;
						        			case 6:  //踢腿
						        				var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 踢腿 "+" 次數: "+ tempdata[i][1] + "</button>";
						        				$('#glist').append(temp);
						        				break;
						        			case 7:  //挺腹
						        				var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 挺腹 "+" 次數: "+ tempdata[i][1] + "</button>";
						        				$('#glist').append(temp);
						        				break;
						        			case 8:  //側抬腿
						        				var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 側抬腿 "+" 次數: "+ tempdata[i][1] + "</button>";
						        				$('#glist').append(temp);
						        				break;
											case 10:  //側上斜舉
						        				var temp = '<button href="" onclick=getdetail2("' + i + '") >' + "動作: 側上斜舉 "+" 次數: "+ tempdata[i][1] + "</button>";
						        				$('#glist').append(temp);
						        				break;
						        		}
				        			
				        			}
				        				
				        				
				        			// }
				        		
			        		}
			        		$("#glist").trigger('create');

				        },
				        fail:function(b) {
				        	alert("失敗" );
				        }
				    });



		    }
		    // function loadGball(){  //load pebble bluetooth plugin
		    //     window.plugins = {
			   //      Gball: cordova.require( 'gball' )
			   //  };
		    // }

			// function loadGeak(){  //load pebble bluetooth plugin
			//   	window.plugins = {
			        
			//     };
		 //    }
		 	function getdetail2(sg){
		 		var action = Number(tempdata[sg][0]); ////action:動作類型
    			num = Number(tempdata[sg][1]); //times:次數
    			degree = Number(tempdata[sg][2]); //degree:幾度
    			var hand = "R"; //hand:左右手 有成功?
    			var level_ear = "S"; //level_ear:摸耳朵程度
				//-----------------開始載入手表插件
    			watch_choice = 0;
    			
    			
    			if(watch_choice == 0){
					loadBluetoothPlugin();
    			}
    			else if(watch_choice == 1){
    				watch_type = 1;
    				loadSmartWatch2();

    				window.plugins.GetValue.passValue(onSuccess_smartWatch2,onError);
    			}else if(watch_choice == 2){
    				watch_type = 1;
    				loadBluetoothPlugin();
    				
    				window.plugins.PluginTest.init(function (data){
	   					alert(data);
	   				}
	   				, function(e){
	   					alert(e);
	   				});

    			}
    			switch(action){
    				case 0:  //上舉
    					level_ear = 0;  //無摸耳程度
    					hand = 0;       //無左右手
    					type = 0;
    					$(".img_action").attr('src','css/images/raise.png');  //change img of #ready_page
    					$('.video_action').attr('src','video/raise_correct.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/raise_angle.png');  //change img of #do-page
    					$(".action_h").html("上舉"+degree+"°");   //改變#ready_page動作類型
    					$(".notice_p").html("※注意:請把聲音和藍芽開啟※</br>請把手錶戴在左手，錶面朝左");			
    				break;
    				case 1:  //下放
    					degree = 0      //無角度
    					level_ear = 0;  //無摸耳程度
    					hand = 0;       //無左右手
    					type = 1;
    					$(".img_action").attr('src',"css/images/lower.png");
    					$('.video_action').attr('src','video/lower_correct.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/lower.png');  //change img of #do-page
    					$(".action_h").html("下放");   //改變#ready_page動作類型
    					$(".notice_p").html("※注意:請把聲音和藍芽開啟※</br>請把手錶戴在左手，錶面朝左");
    				break;
    				case 2:  //摸耳朵
    					degree=0      //無角度
    					$(".img_action").attr('src',"css/images/ear.png");
    					$('.video_action').attr('src','video/ear_correct.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/ear.png');  //change img of #do-page
    					$(".action_h").html("摸耳朵:"+((hand=='L') ? "左手" : "右手")+((level_ear=='S') ? "到肩膀" : "到耳朵"));   //改變#ready_page動作類型
    					$(".notice_p").html("※注意:請把聲音和藍芽開啟※</br>請把手錶戴在左或右手，");
    					if(level_ear=='S'){
    						if(hand=='R'){   //右手肩膀
    							type = 2;
    						}
    						else if(hand=='L'){         //左手肩膀
    							type = 3;
    						}
    					}
    					else if(level_ear=='E'){
    						if(hand=='R'){   //右手耳朵
    							type = 4;
    						}
    						else if(hand=='L'){         //左手耳朵
    							type = 5;
    						}
    					}
    				break;
    				case 6:  //踢腿
    					degree = 0      //無角度
    					level_ear = 0;  //無摸耳程度
    					hand = 0;       //無左右手
    					type = 6;
    					$(".img_action").attr('src',"css/images/kick.png");
    					$('.video_action').attr('src','video/raise_correct.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/kick.png');  //change img of #do-page
    					$(".action_h").html("踢腿");   //改變#ready_page動作類型
    					$(".notice_p").html("※注意:請把聲音和藍芽開啟※</br>手錶綁在腳的右側(如果你可以綁的話XD)");
    				break;
    				case 7:  //挺腹
    					degree = 0      //無角度
    					level_ear = 0;  //無摸耳程度
    					hand = 0;       //無左右手
    					type = 7;
    					$(".img_action").attr('src',"css/images/stomach.png");
    					$('.video_action').attr('src','video/raise_correct.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/stomach.png');  //change img of #do-page
    					$(".action_h").html("挺腹");   //改變#ready_page動作類型
    					$(".notice_p").html("※注意:請把聲音和藍芽開啟※</br>請把手錶平貼於肚上，放在肚臍下方並把手錶朝自己、面朝上");
    				break;
    				case 8:  //側抬腿
    					degree = 0      //無角度
    					level_ear = 0;  //無摸耳程度
    					hand = 0;       //無左右手
    					type = 8;
    					$(".img_action").attr('src',"css/images/leg.png");
    					$('.video_action').attr('src','video/raise_correct.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/leg.png');  //change img of #do-page
    					$(".action_h").html("側抬腿");   //改變#ready_page動作類型
    					$(".notice_p").html("※注意:請把聲音和藍芽開啟※</br>手錶綁在腳的右側(如果你可以綁的話XD)");
    				break;
					case 10:
						level_ear = 0; //無摸耳程度
						hand = 0; //無左右手
						type = 10;
						$(".img_action").attr('src', "css/images/inclined_lift.jpg");
						$('.video_action').attr('src', 'video/inclined_lift.mp4'); //change video of #ready_page
						$(".do_img").attr('src', 'css/images/inclined_lift.jpg'); //change img of #do-page
						$(".action_h").html("側上斜舉"); //改變#ready_page動作類型
						$(".notice_p").html("※注意事項※</br>請把聲音開啟");
					break;
    			}
    			//固定進入頁面先顯示圖片
    			$('#picture_img').attr('src','css/ready/u39_selected.png');
				$('#video_img').attr('src','css/ready/u37.png');
				$('.video_action').css('display','none');
				$('.img_action').css('display','block');
				if(action == 3){
    				// Test
    				$.mobile.changePage("#test-page",null,true,true);
    			}
				else{
					$.mobile.changePage("#ready-page", null, true, true);
    			processlength = 100/num;	
	 			acce=0;     //一定要歸零!
 				count=0;    //成功次數歸零
 				error_count=0;  //失敗次數歸零
 				f_count=0;
 				$('.f-times').html(f_count);  //目前次數
    			$('.t-times').html("/"+num+"次");  //總次數
  				document.getElementById("times").innerHTML="成功 0 次"; 
  				document.getElementById("errortimes").innerHTML="失敗 0 次";
				}
		 	}
			
			function changeFunc($i){  //避免使用者選到不支援的選項 -by pig84
				var levelElement = document.getElementById("level-choice");
				var degreeElement = document.getElementById("degree-choice");
				var earElement = document.getElementById("ear-choice");
		
				//remove options
				for (var index = levelElement.length-1 ; index >=1 ; index--){
					levelElement.remove(index);
				}
				for (var index = degreeElement.length-1 ; index >=1 ; index--){
					degreeElement.remove(index);
				}
				for (var index = earElement.length-1 ; index >=1 ; index--){
					earElement.remove(index);
				}
		
				//init options
				//hand
				var optionLeft = document.createElement("option");
				optionLeft.value = "L";
				optionLeft.text = "左手";
		
				var optionRight = document.createElement("option");
				optionRight.value = "R";
				optionRight.text = "右手";
		
				var optionNone = document.createElement("option");
				optionNone.value - "nope";
				optionNone.text = "無左右手";
		
				//degree
				var option_90 = document.createElement("option");
				option_90.value = "90";
				option_90.text = "90°";
		
				var option_120 = document.createElement("option");
				option_120.value = "120";
				option_120.text = "120°";
		
				var option_180 = document.createElement("option");
				option_180.value = "180";
				option_180.text = "180°";
		
				var option_no_degree = document.createElement("option");
				option_no_degree.value = "nope";
				option_no_degree.text = "無角度";
		
				//ear
				var optionShoulder = document.createElement("option");
				optionShoulder.value = "S";
				optionShoulder.text = "肩膀";
		
				var optionEar = document.createElement("option");
				optionEar.value = "E";
				optionEar.text = "耳朵";
		
				var optionNoEar = document.createElement("option");
				optionNoEar.value = "nope";
				optionNoEar.text = "無耳朵、肩膀選項";
				
				//adding options
				if ($i == 0 || $i == 1){ //上舉下放
					levelElement.add(optionLeft, levelElement[1]);
					earElement.add(optionNoEar, earElement[1]);
					if($i == 0){
						degreeElement.add(option_90, degreeElement[1]);
						degreeElement.add(option_120, degreeElement[2]);
						degreeElement.add(option_180, degreeElement[3]);
					}
					else{
						degreeElement.add(option_no_degree, degreeElement[1]);
					}
				}
				else if ($i == 2){ //摸耳朵
					levelElement.add(optionRight, levelElement[1]);
					levelElement.add(optionLeft, levelElement[2]);
					degreeElement.add(option_no_degree, degreeElement[1]);
					earElement.add(optionShoulder,earElement[1]);
					earElement.add(optionEar,earElement[2]);
				}
				else if ($i == 6){ //踢腿
					optionRight.text = "右腳";
					levelElement.add(optionRight, levelElement[1]);
					degreeElement.add(option_no_degree, degreeElement[1]);
					earElement.add(optionNoEar, earElement[1]);
				}
				else if ($i == 7){ //挺腹
					levelElement.add(optionNone, levelElement[1]);
					degreeElement.add(option_no_degree, degreeElement[1]);
					earElement.add(optionNoEar, earElement[1]);
				}
				else if ($i == 8){ //側抬腿
					optionRight.text = "右腳";
					levelElement.add(optionRight, levelElement[1]);
					degreeElement.add(option_no_degree, degreeElement[1]);
					earElement.add(optionNoEar, earElement[1]);
				}
				else if ($i == 9){ //重力球
					levelElement.add(optionNone, levelElement[1]);
					degreeElement.add(option_no_degree, degreeElement[1]);
					earElement.add(optionNoEar, earElement[1]);
				}
				else if ($i == 10){ //側上斜舉
					levelElement.add(optionLeft, levelElement[1]);
					degreeElement.add(option_no_degree, degreeElement[1]);
					earElement.add(optionNoEar, earElement[1]);
				}
				else {
					alert('選項錯誤');
				}
			}
			// Stop
			function stopPhoneSensor() {
				if (watchID) {     
			    	var d = new Date();
				    var year = d.getFullYear();
				    var month = d.getMonth() + 1;
				    var date = d.getDate();
				    var hour = d.getHours();
				    var minute = d.getMinutes();
				    var second = d.getSeconds();
				    if(month < 10){
				    	month = "0" + month;
				    }
				    if(date < 10){
				    	date = "0" + date;
				    }
				    if(hour < 10){
				    	hour = "0" + hour;
				    }
				    if(minute < 10){
				    	minute = "0" + minute;
				    }
				    if(second < 10){
				    	second = "0" + second;
				    }
				    fd = year + "/" + month + "/" + date;        //日期
				    ft = hour + ":" + minute + ":" + second;     //結束時間 
					var totals_count = count + error_count;
				    stopback();
				    id_count++;            
				    insert(tempid, fd, Startime, ft, type, degree, num, count, error_count, totals_count); //MySql存入手機資料庫
				    //update(); //上傳到server
				    $.mobile.changePage("#show-page",null,true,true); //跳到->四種復健選擇畫面
				    //showAlert() ;         //跳出 恭喜畫面 + 掌聲音樂
				    switch(type){
			            case 0:
			            	reha_name = "上舉";
			            break;
			            case 1:
			            	reha_name = "下放";
			            break;
			            case 2:
			            	reha_name = "右手摸耳朵";
			            break;
			            case 3:
			            	reha_name = "左手摸耳朵";
			            break;
			            case 4:
			            	reha_name = "右手摸耳朵";
			            break;
			            case 5:
			            	reha_name = "左手摸耳朵";
			            break;
			            case 6:
			            	reha_name = "踢腿";
			            break;
			            case 7:
			            	reha_name = "挺腹";
			            break;
			            case 8:
			            	reha_name = "側抬腿";
			            break;
						case 10:
							reha_name = "側上斜舉";
						break;
		            }
					document.getElementById("times").innerHTML = "成功 0 次";
					document.getElementById("errortimes").innerHTML = "失敗 0 次";
					document.getElementById("show_date").innerHTML = fd;
					document.getElementById("f_action").innerHTML = reha_name;
					document.getElementById("f_times").innerHTML = num;
					document.getElementById("f_degree").innerHTML = ((type == 0) ? degree+"°" : "無");
					if(type == 2 || type == 3){
						document.getElementById("f_earlevel").innerHTML = "肩膀";
					}else if(type == 4 || type == 5){
						document.getElementById("f_earlevel").innerHTML = "耳朵";
					}else{
						document.getElementById("f_earlevel").innerHTML = "無";
					}
					alert('成功' + count + '次，失敗' + error_count + '次。');
				    document.getElementById("get_point").innerHTML = "獲得" + count + "點成就";
				    $('#start_img').attr('src','css/ready/u31.png');
				    $('.f-times').html(0);  //目前次數
    				$('.t-times').html("/" + num + "次");  //總次數
				    acce = 0;
				    navigator.accelerometer.clearWatch(watchID);    
				    watchID = null;
				    more = false;
			    }
			}
			/*-----做出錯誤動作時的反應!!!------*/
			function interupt(){    
				//playmusic(6);           /*-----動作錯誤，請從新開始 error.mp3-----*/
				e_media.play(); 	    
				e_media.seekTo(0);
			    ready = 0;		
			    acce = 0;       //1s後再開始
			    test = 0;       //做到哪
			    error_count++;
			    $('.f-times').html(++f_count);  //目前次數
			    document.getElementById("errortimes").innerHTML = "失敗 " + error_count + " 次";	    			
			}

			function onSuccess(acceleration) {
				acce++;
				if(acce > 400){      //2s定位
				    switch(type){
				    	case 0 :
				    	//上舉
			    		time_counter++;
			   			if(time_counter < time_limit){
			   				if(test == 0) {
				    			if ( type1_start_lowerbound_y < acceleration.y && acceleration.y < type1_start_upperbound_y && type1_start_lowerbound_x < Math.abs(acceleration.x) && Math.abs(acceleration.x) < type1_start_upperbound_x){
					            	//playmusic(3); /*---------開始-------*/
						            s_media.play(); 	    
						            s_media.seekTo(0);
						            test = 1;         
									time_counter = 0;									
				      			}
				        	}else if(test == 1){
				        		if(type1_fail_lowerbound_z < Math.abs(acceleration.z) || type1_fail_upperbound_y > acceleration.y){
					        	    // 上舉90度失敗
					        	    time_counter = 0;
					            	interupt();
					            	if((count + error_count) == num){
					              		stopPhoneSensor();    
					            	}
				          		}else if(type1_90_success_lowerbound_y < acceleration.y && acceleration.y < type1_90_success_upperbound_y){
					            	// 上舉90度成功
					            	time_counter = 0;
					            	if(degree == 90){
							            test = 0;
							            count++;                                         
							            document.getElementById("times").innerHTML = "成功 " + count + " 次";
							            $('.f-times').html(++f_count);  //目前次數
							            acce = 0;
					              		if((count + error_count) == num){
							                /*---------恭喜，已達成目標-------*/
							                navigator.notification.vibrate(1000);
							                f_media.play(); 	    
							                f_media.seekTo(0);
							                stopPhoneSensor(); 
					              		}else{
							                /*---------已完成，請再次就定位-------*/
							                navigator.notification.vibrate(1000);
							                a_media.play(); 	    
							                a_media.seekTo(0);
					              		}
					            	}else{
					            		// 120度、180度經過中間點回饋
					            		time_counter = 0;
							            navigator.notification.vibrate(500);
							            test = 2;
					            	}
					          	}               
					        }else if(test == 2){
					        	// 上舉120度失敗
					        	if(type1_fail_lowerbound_z < Math.abs(acceleration.z)){
					        		time_counter = 0;
						            interupt();
						            if((count + error_count) == num){
						            	stopPhoneSensor();    
						            }
					          	}
					          	// 上舉120度成功
					          	if (type1_120_success_lowerbound_y < Math.abs(acceleration.y) && Math.abs(acceleration.y) < type1_120_success_upperbound_y){
					          		time_counter = 0;
									if(degree == 120){
						            	test = 0;
							            count++;                                         
							            document.getElementById("times").innerHTML = "成功 " + count + " 次";
							            $('.f-times').html(++f_count);  //目前次數
							            acce = 0;
							            if((count + error_count) == num){  
							                /*---------恭喜，已達成目標-------*/	
							                navigator.notification.vibrate(1000);	
							                f_media.play(); 	    
							                f_media.seekTo(0);
							                stopPhoneSensor(); 	  
						              	}else{
							                /*---------已完成，請再次就定位-------*/
							                navigator.notification.vibrate(1000);
							                a_media.play(); 	    
							                a_media.seekTo(0);	   
						               }
					            	}else{
					            		// 180度經過中間點回饋
					            		time_counter = 0;
							            navigator.notification.vibrate(500);
							            test = 3;
					           		}	
								}               
					        }else{
					        	if(type1_fail_lowerbound_z < Math.abs(acceleration.z)){	
					        		// 上舉180度失敗
					        		time_counter = 0;
					          		interupt();
							        if((count + error_count) == num){
							        	stopPhoneSensor();    
							        }
					        	}	
					        	if (type1_180_success_lowerbound_y < Math.abs(acceleration.y) && Math.abs(acceleration.y) < type1_180_success_upperbound_y ){
					        		// 上舉180度成功
					        		time_counter = 0;
						        	test = 0;
						        	count++;                                                  
						        	document.getElementById("times").innerHTML = "成功 " + count + " 次";
						        	$('.f-times').html(++f_count);  //目前次數
						        	//setProcess(f_count); 
						         	acce = 0;
						         	if((count + error_count) == num){    
								        /*---------恭喜，已達成目標-------*/
								        navigator.notification.vibrate(1000);
								        f_media.play(); 	    
								        f_media.seekTo(0);
								        stopPhoneSensor();  	   
						        	}else{
								        /*---------已完成，請再次就定位-------*/ 
								        navigator.notification.vibrate(1000);
								        a_media.play(); 	    
								        a_media.seekTo(0);   
						        	}                  
					      		}               
					    	}
			   			}else{
			   				// 如果計時超過設定時間沒有動作，判斷為失敗
			   				time_counter = 0;
			            	interupt();
			            	if((count + error_count) == num){
			              		stopPhoneSensor();    
			            	}
			   			}
				    	break;

			    		// 下放
						case 1 :
							time_counter++;
							if(time_counter < time_limit){
						    if(test == 0){
						    	if ( type2_start_lowerbound_y < acceleration.y && acceleration.y < type2_start_upperbound_y && type2_start_lowerbound_x < Math.abs(acceleration.x) && Math.abs(acceleration.x) < type2_start_upperbound_x){
						                //playmusic(3);       /*---------開始-------*/ 
							        s_media.play(); 	    
							        s_media.seekTo(0);
							        test = 1;
									time_counter = 0;
						      	}
						    }else{
						    	if(type2_fail_lowerbound_z < Math.abs(acceleration.z)){
						    		// 失敗
						        	interupt();
									time_counter = 0;
							        if((count + error_count) == num){
							              stopPhoneSensor();    
							            }
						      	}        
						      	if (type2_success_lowerbound_y < acceleration.y && acceleration.y < type2_success_upperbound_y ){
							        test = 0;
									time_counter = 0;
							        count++;                                                   
							        document.getElementById("times").innerHTML = "成功 " + count + " 次";
							        $('.f-times').html(++f_count);  //目前次數
							        //setProcess(f_count); 
							        acce = 0;
							        if((count + error_count) == num){
							        	//0.5秒後跑掌聲音樂然後每4秒輪回跑 
							          	//playmusic(5);    /*---------恭喜，已達成目標-------*/ 
							          	navigator.notification.vibrate(1000);		
							          	f_media.play(); 	    
							          	f_media.seekTo(0);
							          	stopPhoneSensor(); 
							        }else{
							          	//playmusic(4);    /*---------已完成，請再次就定位-------*/ 	
							          	navigator.notification.vibrate(1000);
							          	a_media.play(); 	    
							          	a_media.seekTo(0); 
							        }
							    }
						    }
						}else{
				   				// 如果計時超過設定時間沒有動作，判斷為失敗
				   				time_counter = 0;
				            	interupt();
				            	if((count + error_count) == num){
				              		stopPhoneSensor();    
				            	}
				   			}               
						break;

						// 右手摸肩
						case 2 :
							time_counter++;
							if(time_counter < time_limit){
					    		if(test == 0){
					    			// 開始
					      			if(type34_start_lowerbound_x < acceleration.x && acceleration.x < type34_start_upperbound_x && type34_start_lowerbound_y < acceleration.y && acceleration.y < type34_start_upperbound_y && type34_start_lowerbound_z < acceleration.z && acceleration.z < type34_start_upperbound_z){
								        //playmusic(3);   /*---------開始-------*/ 
								        s_media.play(); 	    
								        s_media.seekTo(0);
								        test = 1;
								        time_counter = 0;
					      			}
					    		}
					    		// else if(test == 1){
					    		// 	// 中間點回饋-1
					    		// 	if(3.9 < acceleration.x && acceleration.x < 4.5 && 0.8 < acceleration.y && acceleration.y < 1.5 && -9 < acceleration.z && acceleration.z < -8){
					    		// 		s_media.play(); 	    
						     //        	s_media.seekTo(0);
					    		// 		time_counter = 0;
					    		// 		test = 2;
					    		// 		navigator.notification.vibrate(500);
					    		// 	}
					    		// }else if(test == 2){
					    		// 	// 中間點回饋-2
					    		// 	if(6.3 < acceleration.x && acceleration.x < 7.6 && 4.5 < acceleration.y && acceleration.y < 5.6 && -4.5 < acceleration.z && acceleration.z < -3){
					    		// 		s_media.play(); 	    
						     //        	s_media.seekTo(0);
					    		// 		time_counter = 0;
						    	// 		test = 3;
						    	// 		navigator.notification.vibrate(500);
					    		// 	}
					    		// }
					    		else{
					    			// 成功
					      			ear_count++;
					      			if(type3_success_lowerbound_x < acceleration.x && acceleration.x < type3_success_upperbound_x && type3_success_lowerbound_y < acceleration.y && acceleration.y < type3_success_upperbound_y && type3_success_lowerbound_z < acceleration.z && acceleration.z < type3_success_upperbound_z){
								        test = 0;
								        time_counter = 0;
								        count++;                                         
								        document.getElementById("times").innerHTML = "成功 " + count + " 次";
								        $('.f-times').html(++f_count);  //目前次數
								        //setProcess(f_count); 
								        ear_count = 0;
								        acce = 0;
								        if((count + error_count) == num){
								          //playmusic(5);    /*---------恭喜，已達成目標-------*/		
								          navigator.notification.vibrate(1000);
								          f_media.play(); 	    
								          f_media.seekTo(0);
								          stopPhoneSensor();  			   
								        }else{
									      	//playmusic(4);    /*---------已完成，請再次就定位-------*/ 
									        navigator.notification.vibrate(1000);
									        a_media.play(); 	    
									        a_media.seekTo(0);
								        }
					      			}			
					    		}
					    	}else{
					    		// 如果計時超過設定時間沒有動作，判斷為失敗
				   				time_counter = 0;
				            	interupt();
				            	if((count + error_count) == num){
				              		stopPhoneSensor();    
				            	}
					    	}

			  			break;

			  			case 3 :  //左手摸肩
			  				time_counter++;
					  		if(time_counter < time_limit){
			  				if(test == 0){
							    if (type56_start_lowerbound_x < acceleration.x && acceleration.x < type56_start_upperbound_x && type56_start_lowerbound_y < acceleration.y && acceleration.y < type56_start_upperbound_y && type56_start_lowerbound_z < acceleration.z && acceleration.z < type56_start_upperbound_z){
							        //playmusic(3);   /*---------開始-------*/ 
							    	s_media.play();       
							      	s_media.seekTo(0);
							      	test = 1;
									time_counter = 0;
							    }
							}else if(test == 2){
			    				ear_count++;
						    	if(type5_success_lowerbound_x < acceleration.x && acceleration.x < type5_success_upperbound_x && type5_success_lowerbound_y < acceleration.y && acceleration.y < type5_success_upperbound_y && type5_success_lowerbound_z < acceleration.z && acceleration.z < type5_success_upperbound_z){           
							    	test = 0;
									time_counter = 0;
							      	count++;                                         
							      	document.getElementById("times").innerHTML = "成功 " + count + " 次";
							      	$('.f-times').html(++f_count);  //目前次數
							      	ear_count = 0;
							      	acce = 0;
							      	if((count + error_count) == num){
							            //playmusic(5);    /*---------恭喜，已達成目標-------*/   
								        navigator.notification.vibrate(1000);
								        f_media.play();       
								        f_media.seekTo(0);
								        stopPhoneSensor();           
							      	}else{
								        //playmusic(4);    /*---------已完成，請再次就定位-------*/ 
								        navigator.notification.vibrate(1000);
								        a_media.play();      
								        a_media.seekTo(0);
						      		}                  
						    	}     
					  		}
					  	}else{
					    		// 如果計時超過設定時間沒有動作，判斷為失敗
				   				time_counter = 0;
				            	interupt();
				            	if((count + error_count) == num){
				              		stopPhoneSensor();    
				            	}
					    	}
					  	break;

			    		case 4 : //右手摸耳朵
			    			time_counter++;
			                if(time_counter < time_limit){
						    if(test == 0)
						    {
						    	if (type34_start_lowerbound_x < acceleration.x && acceleration.x < type34_start_upperbound_x && type34_start_lowerbound_y < acceleration.y && acceleration.y < type34_start_upperbound_y && type34_start_lowerbound_z < acceleration.z && acceleration.z < type34_start_upperbound_z){
						                //playmusic(3);   /*---------開始-------*/ 
						            s_media.play();       
						            s_media.seekTo(0);
						            test = 1;
									time_counter = 0;									
								}
						    }else{
			                	ear_count++;
			        			if(type4_success_lowerbound_x < acceleration.x && acceleration.x < type4_success_upperbound_x && type4_success_lowerbound_y < acceleration.y && acceleration.y < type4_success_upperbound_y && type4_success_lowerbound_z < acceleration.z && acceleration.z < type4_success_upperbound_z){           
						          	test = 0;
									time_counter = 0;
						          	count++;                                         
						          	document.getElementById("times").innerHTML = "成功 " + count + " 次";
						          	$('.f-times').html(++f_count);  //目前次數
						          	//setProcess(f_count); 
						          	ear_count = 0;
						          	acce = 0;
			          				if((count + error_count) == num){ 
					                    //playmusic(5);    /*---------恭喜，已達成目標-------*/   
					                    navigator.notification.vibrate(1000);
					                    f_media.play();       
					                    f_media.seekTo(0);
					                    stopPhoneSensor();          
			                  		}else{
				                     	//playmusic(4);    /*---------已完成，請再次就定位-------*/ 
				                     	navigator.notification.vibrate(1000);
				                     	a_media.play();      
				                     	a_media.seekTo(0);
			                    	}                  
			                 	}     
			                }
			            }else{
					    		// 如果計時超過設定時間沒有動作，判斷為失敗
				   				time_counter = 0;
				            	interupt();
				            	if((count + error_count) == num){
				              		stopPhoneSensor();    
				            	}
					    	}
			            break;

					    case 5 :  //左手摸耳朵
					    	time_counter++;
						    if(time_counter < time_limit){
						    if(test == 0){
						      	if (type56_start_lowerbound_x < acceleration.x && acceleration.x < type56_start_upperbound_x && type56_start_lowerbound_y < acceleration.y && acceleration.y < type56_start_upperbound_y && type56_start_lowerbound_z < acceleration.z && acceleration.z < type56_start_upperbound_z){
						                //playmusic(3);   /*---------開始-------*/ 
						            s_media.play();       
						            s_media.seekTo(0);
						            test = 1;
									time_counter = 0;
						        }
						    }else{
						        ear_count++;
						        if(type6_success_lowerbound_x < acceleration.x && acceleration.x < type6_success_upperbound_x && type6_success_lowerbound_y < acceleration.y && acceleration.y < type6_success_upperbound_y && type6_success_lowerbound_z < acceleration.z && acceleration.z < type6_success_upperbound_z){           
						        	test = 0;
									time_counter = 0;
						          	count++;                                         
						          	document.getElementById("times").innerHTML = "成功 " + count + " 次";
						          	$('.f-times').html(++f_count);  //目前次數
						          	//setProcess(f_count); 
						          	ear_count = 0;
						          	acce = 0;
						          	if((count + error_count) == num){
						                //playmusic(5);    /*---------恭喜，已達成目標-------*/   
						                navigator.notification.vibrate(1000);
						                f_media.play();       
						                f_media.seekTo(0);
						                stopPhoneSensor();           
						            }else{
						                //playmusic(4);    /*---------已完成，請再次就定位-------*/ 
						                navigator.notification.vibrate(1000);
						                a_media.play();      
						                a_media.seekTo(0);
						            }                  
						        }     
						    }
						}else{
					    		// 如果計時超過設定時間沒有動作，判斷為失敗
				   				time_counter = 0;
				            	interupt();
				            	if((count + error_count) == num){
				              		stopPhoneSensor();    
				            	}
					    	}
						break;
						//前踢(前抬腿)
						case 6 :
						time_counter++;
						    if(time_counter < time_limit){
						    if(test == 0){
						    	if(Math.abs(acceleration.x) < type7_start_upperbound_x && type7_start_lowerbound_y < acceleration.y && acceleration.y < type7_start_upperbound_y && acceleration.z < type7_start_upperbound_z){
						        	//判斷開始動作
						        	s_media.play();
						         	s_media.seekTo(0);
						         	test = 1;
									time_counter = 0;
						      	}
						    }else{
						    	if(Math.abs(acceleration.x) > type7_fail_lowerbound_x){
						      		//失敗(錯誤動作)
						         	interupt();
						         	if((count+error_count) == num){
						            	stopPhoneSensor();    
						          	} 
						     	}if(acceleration.y > type7_success_lowerbound_y && acceleration.z > type7_success_lowerbound_z){
						      		test = 0;
									time_counter = 0;
						      		count++;                                                  
						      		document.getElementById("times").innerHTML = "成功 " + count + " 次";
						      		$('.f-times').html(++f_count);  //目前次數
						      		acce = 0;
						      		if((count + error_count) == num){
								        //恭喜，已達成目標
								        navigator.notification.vibrate(1000);
								        f_media.play();      
								        f_media.seekTo(0); 
								        stopPhoneSensor(); 
						      		}else{
								        //已完成，請再次就定位
								        navigator.notification.vibrate(1000);
								        a_media.play();      
								        a_media.seekTo(0);   
								    }
						     	}
						    }
						}else{
				   				// 如果計時超過設定時間沒有動作，判斷為失敗
				   				time_counter = 0;
				            	interupt();
				            	if((count + error_count) == num){
				              		stopPhoneSensor();    
				            	}
				   			}
						break;

						//挺腹
						case 7 :
						 time_counter++;
						    if(time_counter < time_limit){
						    if(test == 0){
						    	if(type8_start_lowerbound_x < Math.abs(acceleration.x) && Math.abs(acceleration.x) < type8_start_upperbound_x && type8_start_lowerbound_y < Math.abs(acceleration.y) && Math.abs(acceleration.y) < type8_start_upperbound_y){
						        	//判斷開始動作
						        	s_media.play();
						         	s_media.seekTo(0);
						         	test = 1;
									time_counter = 0;
						      	}
						    }else{
						       	// if( type7_fail_lowerbound_x < Math.abs(acceleration.x)){
						        // 	//失敗(錯誤動作)
						        //  	interupt();
						        //  	if((count + error_count) == num){
						        //     	stopPhoneSensor();    
						        //     } 
						        // }
						        if(type8_success_lowerbound_x < Math.abs(acceleration.x) && Math.abs(acceleration.x) < type8_success_upperbound_x && type8_success_lowerbound_y < Math.abs(acceleration.y) && Math.abs(acceleration.y) < type8_success_upperbound_y){
						        	test = 0;
									time_counter = 0;
						         	count++;                                                  
						         	document.getElementById("times").innerHTML = "成功 " + count + " 次";
						         	$('.f-times').html(++f_count);  //目前次數
							        acce = 0;
							        if((count + error_count) == num){
						          		//恭喜，已達成目標         
							            navigator.notification.vibrate(1000);
							            f_media.play();      
							            f_media.seekTo(0); 
							            stopPhoneSensor();
						         	}else{
							          	//已完成，請再次就定位
							           	navigator.notification.vibrate(1000);
							           	a_media.play();      
							           	a_media.seekTo(0);   
						         	}
						        }
						    }
						}else{
				   				// 如果計時超過設定時間沒有動作，判斷為失敗
				   				time_counter = 0;
				            	interupt();
				            	if((count + error_count) == num){
				              		stopPhoneSensor();    
				            	}
				   			}
						break;
						    
					    //踢腿
					    case 8 :
					    if(time_counter < time_limit){
						    if($("#level-choice").val() == 'R'){
							    if(test == 0){
							    	if(Math.abs(acceleration.x) < type9_right_start_upperbound_x && type9_right_start_lowerbound_y < Math.abs(acceleration.y) && Math.abs(acceleration.z) < type9_right_start_upperbound_z){
							      		//判斷開始動作
							         	s_media.play();
							         	s_media.seekTo(0);
							         	test = 1;
							         	time_counter = 0;
							     	}
							    }else{
							     	if(Math.abs(acceleration.x) > type9_right_fail_lowerbound_x){
							      		//失敗(錯誤動作)
							         	interupt();
							         	time_counter = 0;
							         	if((count + error_count) == num){
							              	stopPhoneSensor();    
							            } 
							     	}
							     	if(type9_right_success_lowerbound_y < acceleration.y && acceleration.z > type9_right_success_lowerbound_z){
							        	test = 0;
							        	time_counter = 0;
							         	count++;                                                  
							         	document.getElementById("times").innerHTML = "成功 " + count + " 次";
							         	$('.f-times').html(++f_count);  //目前次數
							         	acce = 0;
							         	if((count + error_count) == num){
								          	//恭喜，已達成目標        
								           	navigator.notification.vibrate(1000);
								           	f_media.play();      
								           	f_media.seekTo(0);
								           	stopPhoneSensor(); 
							         	}else{
								          	//已完成，請再次就定位
								           	navigator.notification.vibrate(1000);
								           	a_media.play();      
								           	a_media.seekTo(0);
							         	}
							     	}
							    }
						}else{
						    	// 左邊
						    	if(test==0){
							    	if(Math.abs(acceleration.x) < type9_left_start_upperbound_x && type9_left_start_lowerbound_y < Math.abs(acceleration.y) && Math.abs(acceleration.z) < type9_left_start_upperbound_z){
							      		//判斷開始動作
							         	s_media.play();
							         	s_media.seekTo(0);
							         	test=1;
							         	time_counter = 0;
							     	}
							    }else{
							     	if(Math.abs(acceleration.x) > type9_left_fail_lowerbound_x){
							      		//失敗(錯誤動作)
							         	interupt();
							         	time_counter = 0;
							         	if((count+error_count)==num){
							              	stopPhoneSensor();    
							            } 
							     	}
							     	if(type9_left_success_lowerbound_y > acceleration.y && acceleration.z > type9_left_success_lowerbound_z){
							        	test=0;
							        	time_counter = 0;
							         	count++;                                                  
							         	document.getElementById("times").innerHTML="成功 "+count+" 次";
							         	$('.f-times').html(++f_count);  //目前次數
							         	acce=0;
							         	if((count+error_count)==num){
								          	//恭喜，已達成目標        
								           	navigator.notification.vibrate(1000);
								           	f_media.play();      
								           	f_media.seekTo(0);
								           	stopPhoneSensor(); 
							         	}else{
								          	//已完成，請再次就定位
								           	navigator.notification.vibrate(1000);
								           	a_media.play();      
								           	a_media.seekTo(0);
							         	}
							     	}
							    }
						    }
					    }else{
			   				// 如果計時超過設定時間沒有動作，判斷為失敗
			   				time_counter = 0;
			            	interupt();
			            	if((count + error_count) == num){
			              		stopPhoneSensor();    
			            	}
			   			}
						break;
						case 10:
							time_counter++;
							if (time_counter < time_limit) {
								if (test == 0) {
									if (type10_start_lowerbound_x < acceleration.x && acceleration.x < type10_start_upperbound_x && type10_start_lowerbound_y < acceleration.y && acceleration.y < type10_start_upperbound_y ) {
										//playmusic(3);       /*---------開始-------*/ 
										s_media.play();
										s_media.seekTo(0);
										test = 1;
										time_counter = 0;
									}
								} else if(test == 1){
									if (type10_fail_lowerbound_z < Math.abs(acceleration.z) || type10_fail_upperbound_y > acceleration.y ) {
										// 失敗
										time_counter = 0;
										interupt();
										if ((count + error_count) == num) {
											stopPhoneSensor();
										}
									}
									if (type10_success_lowerbound_x < acceleration.x && acceleration.x < type10_success_upperbound_x && type10_success_lowerbound_y < acceleration.y && acceleration.y < type10_success_upperbound_y && type10_success_lowerbound_z < acceleration.z && acceleration.z < type10_success_upperbound_z && Math.abs(Anx) > type10_success_bound_Gx) {
										test = 0;
										time_counter = 0;
										count++;
										document.getElementById("times").innerHTML = "成功 " + count + " 次";
										$('.f-times').html(++f_count); //目前次數
										//setProcess(f_count); 
										acce = 0;
										if ((count + error_count) == num) {
											//0.5秒後跑掌聲音樂然後每4秒輪回跑 
											//playmusic(5);    /*---------恭喜，已達成目標-------*/ 
											navigator.notification.vibrate(1000);
											f_media.play();
											f_media.seekTo(0);
											stopPhoneSensor();
										} else {
											//playmusic(4);    /*---------已完成，請再次就定位-------*/   
											navigator.notification.vibrate(1000);
											a_media.play();
											a_media.seekTo(0);
										}	
									}
								}
							} else {
								// 如果計時超過設定時間沒有動作，判斷為失敗
								time_counter = 0;
								interupt();
								if ((count + error_count) == num) {
									stopPhoneSensor();
								}
							}
						break;
					}/*--switch--*/
				}/*--acce--*/
			}

        	function onError() {
        		alert("錯誤:加速感測器發生錯誤!");
        	}
			function OnSuccess_g(speed){
				Anx = speed.x;
				Any = speed.y;
				Anz = speed.z;
			}
			function OnError_g(){
				//alert("錯誤：陀螺儀錯誤!")
			}
		    function get_detail(){   //get the value of select tag & 做復健動作開始初始準備
		    	var action = parseInt($('#action-choice').val()); ////action:動作類型
    			num = parseInt($('#times-choice').val()); //times:次數
    			degree = parseInt($('#degree-choice').val()); //degree:幾度
    			var hand = $('#level-choice').val(); //hand:左右手 有成功?
    			var level_ear = $('#ear-choice').val(); //level_ear:摸耳朵程度
				if ($('#action-choice').val() == "未選擇" || $('#times-choice').val() == "未選擇" || $('#degree-choice').val() == "未選擇" || hand == "未選擇" || level_ear == "未選擇"){
					alert('請重新選好每個選項，返回上一頁');
					window.location.href = "i_index.html";
				}
    			switch(action){
    				case 0:  //上舉
    					level_ear = 0;  //無摸耳程度
    					hand = 0;       //無左右手
    					type = 0;
    					$(".img_action").attr('src','css/images/raise.png');  //change img of #ready_page
    					$('.video_action').attr('src','video/accurate_raise.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/raise_angle.png');  //change img of #do-page
    					$(".action_h").html("上舉" + degree + "°");   //改變#ready_page動作類型
    					$(".notice_p").html("※注意事項※</br>請把聲音開啟");			
    				break;
    				case 1:  //下放
    					degree = 0      //無角度
    					level_ear = 0;  //無摸耳程度
    					hand = 0;       //無左右手
    					type = 1;
    					$(".img_action").attr('src',"css/images/lower.png");
    					$('.video_action').attr('src','video/accurate_lower.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/lower.png');  //change img of #do-page
    					$(".action_h").html("下放");   //改變#ready_page動作類型
    					$(".notice_p").html("※注意事項※</br>請把聲音開啟");
    				break;
    				case 2:  //摸耳朵
    					degree=0      //無角度
    					$(".img_action").attr('src',"css/images/ear.png");
    					$('.video_action').attr('src','video/accurate_ear.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/ear.png');  //change img of #do-page
    					$(".action_h").html("摸耳朵:" + ((hand == 'L') ? "左手" : "右手") + ((level_ear == 'S') ? "到肩膀" : "到耳朵"));   //改變#ready_page動作類型
    					$(".notice_p").html("※注意事項※</br>請把聲音開啟</br>開始動作:手機置於膝蓋位置且手機面朝下");
    					// 肩膀
    					if(level_ear == 'S'){
    						// 右手
    						if(hand == 'R'){
    							type = 2;
    						}
    						// 左手
    						else if(hand == 'L'){
    							type = 3;
    						}
    					}
    					// 耳朵
    					else if(level_ear == 'E'){
    						// 右手
    						if(hand == 'R'){
    							type = 4;
    						}
    						// 左手
    						else if(hand == 'L'){
    							type = 5;
    						}
    					}
    				break;
    				case 6:  //踢腿
    					degree = 0      //無角度
    					level_ear = 0;  //無摸耳程度
    					hand = 0;       //無左右手
    					type = 6;
    					$(".img_action").attr('src',"css/images/kick.png");
    					$('.video_action').attr('src','video/accurate_kick.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/kick.png');  //change img of #do-page
    					$(".action_h").html("踢腿");   //改變#ready_page動作類型
    					$(".notice_p").html("※注意:請把聲音開啟※</br>請確實把手機綁在腳的前側並把手機的頭朝腳部、面朝上");
    				break;
    				case 7:  //挺腹
    					degree = 0      //無角度
    					level_ear = 0;  //無摸耳程度
    					hand = 0;       //無左右手
    					type = 7;
    					$(".img_action").attr('src',"css/images/stomach.png");
    					$('.video_action').attr('src','video/accurate_stomach.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/stomach.png');  //change img of #do-page
    					$(".action_h").html("挺腹");   //改變#ready_page動作類型
    					$(".notice_p").html("※注意:請把聲音開啟※</br>請確實把手機放再肚臍下方並把手機的頭朝腳部、面朝外");
    				break;
    				case 8:  //側抬腿
    					degree = 0      //無角度
    					level_ear = 0;  //無摸耳程度
    					hand = 0;       //無左右手
    					type = 8;
    					$(".img_action").attr('src',"css/images/leg.png");
    					$('.video_action').attr('src','video/accurate_leg.mp4');  //change video of #ready_page
    					$(".do_img").attr('src','css/images/leg.png');  //change img of #do-page
    					$(".action_h").html("側抬腿");   //改變#ready_page動作類型
    					$(".notice_p").html("※注意:請把聲音開啟※</br>請確實把手機綁在腳的側邊並把手機的頭朝大腿、面朝外");
    				break;
    				case 9:  //重力球
    					$(".action_h").html("重力球"); 
    					var ss="css/images/circle.png";
            			$('#ball-page').css("background-image","url("+ss+")"); 
            			$('#ball-page').css({ 'background-size': '100% 100%' });    
    				break;
					case 10: //側上斜舉
						level_ear = 0; //無摸耳程度
						hand = 0; //無左右手
						type = 10;
						$(".img_action").attr('src', "css/images/inclined_lift.jpg");
						$('.video_action').attr('src', 'video/inclined_lift.mp4'); //change video of #ready_page
						$(".do_img").attr('src', 'css/images/inclined_lift.jpg'); //change img of #do-page
						$(".action_h").html("側上斜舉"); //改變#ready_page動作類型
						$(".notice_p").html("※注意事項※</br>請把聲音開啟");
					break;

    			}
    			//固定進入頁面先顯示圖片
    			$('#picture_img').attr('src','css/ready/u39_selected.png');
				$('#video_img').attr('src','css/ready/u37.png');
				$('.video_action').css('display','none');
				$('.img_action').css('display','block');
    			if(action == 3){
    				// 進入測試程式時作不同的介面配置
    				$.mobile.changePage("#test-page",null,true,true);
    			}
    			if(action == 9){
    				$.mobile.changePage("#ball-page",null,true,true);
    				init();
 
    			}
    			else{
    				
    				$.mobile.changePage("#ready-page",null,true,true);
    				processlength = 100 / num;	
		 			acce = 0;     //一定要歸零!
	 				count = 0;    //成功次數歸零
	 				error_count = 0;  //失敗次數歸零
	 				f_count = 0;
	 				$('.f-times').html(f_count);  //目前次數
	    			$('.t-times').html("/" + num + "次");  //總次數
	  				document.getElementById("times").innerHTML = "成功 0 次"; 
	  				document.getElementById("errortimes").innerHTML = "失敗 0 次"; 
    			}
    			
    		}

    	</script>

    	<!--點我返回-->
    	<script>        
			function ctheme(color){
		  		if(color == "a"){
		  			$("#a").css("background", "-webkit-linear-gradient(#69bde4,#8cdedc)");
		  			$("#a").css("background", "o-linear-gradient(#69bde4,#8cdedc)");
		  			$("#a").css("background", "-moz-linear-gradient(#69bde4,#8cdedc)");
		  			$("#a").css("background", "linear-gradient(#69bde4,#8cdedc)");
		  			$("#a").css("color", "#FFF");     
			        cc = 1;
			    }else if(color == "b" && cc == 1){                        
			        $("#b").css("background", "-webkit-linear-gradient(#69bde4,#8cdedc)");
		  			$("#b").css("background", "o-linear-gradient(#69bde4,#8cdedc)");
		  			$("#b").css("background", "-moz-linear-gradient(#69bde4,#8cdedc)");
		  			$("#b").css("background", "linear-gradient(#69bde4,#8cdedc)");
		  			$("#b").css("color", "#FFF");     
			        cc = 2;
			    }else if(color == "c" && cc == 2){        
			        $("#c").css("background", "-webkit-linear-gradient(#69bde4,#8cdedc)");
		  			$("#c").css("background", "o-linear-gradient(#69bde4,#8cdedc)");
		  			$("#c").css("background", "-moz-linear-gradient(#69bde4,#8cdedc)");
		  			$("#c").css("background", "linear-gradient(#69bde4,#8cdedc)");
		  			$("#c").css("color", "#FFF");     
			        cc = 3;
			    }else{
			        if(color == "d" && cc == 3){        
			        	$("#d").css("background", "-webkit-linear-gradient(#69bde4,#8cdedc)");
			  			$("#d").css("background", "o-linear-gradient(#69bde4,#8cdedc)");
			  			$("#d").css("background", "-moz-linear-gradient(#69bde4,#8cdedc)");
			  			$("#d").css("background", "linear-gradient(#69bde4,#8cdedc)");
			  			$("#d").css("color", "#FFF");     
			            stopPhoneSensor();
		  				$("#a").css("background", "-webkit-linear-gradient(#f2eddf,#e1ddda)");
			            $("#b").css("background", "-webkit-linear-gradient(#f2eddf,#e1ddda)");
			            $("#c").css("background", "-webkit-linear-gradient(#f2eddf,#e1ddda)");
			            $("#d").css("background", "-webkit-linear-gradient(#f2eddf,#e1ddda)");
		  				$("#a").css("background", "-o-linear-gradient(#f2eddf,#e1ddda)");
			            $("#b").css("background", "-o-linear-gradient(#f2eddf,#e1ddda)");
			            $("#c").css("background", "-o-linear-gradient(#f2eddf,#e1ddda)");
			            $("#d").css("background", "-o-linear-gradient(#f2eddf,#e1ddda)");
		  				$("#a").css("background", "-moz-linear-gradient(#f2eddf,#e1ddda)");
			            $("#b").css("background", "-moz-linear-gradient(#f2eddf,#e1ddda)");
			            $("#c").css("background", "-moz-linear-gradient(#f2eddf,#e1ddda)");
			            $("#d").css("background", "-moz-linear-gradient(#f2eddf,#e1ddda)");
			            $("#a").css("background", "linear-gradient(#f2eddf,#e1ddda)");
			            $("#b").css("background", "linear-gradient(#f2eddf,#e1ddda)");
			            $("#c").css("background", "linear-gradient(#f2eddf,#e1ddda)");
			            $("#d").css("background", "linear-gradient(#f2eddf,#e1ddda)");
			            $("#a").css("color", "#333");
			            $("#b").css("color", "#333"); 
			            $("#c").css("color", "#333"); 
			            $("#d").css("color", "#333");             
			        }             
			    }    	
		  	}
		</script>

		<!--音樂-->
    	<script>
			var r_media = null; 
			var p_media = null;  
			var s_media = null; 
			var a_media = null; 
			var f_media = null; 
			var e_media = null; 

			function playmusic() {
				// 就定位
			  	var urlr = "/android_asset/www/css/images/ready.mp3";
			  	r_media = new Media(urlr,        
		   		function() {         
		   		},        
				function(err) {
				     //  console.log("Music Error: "+err);
				});	

			  	// 掌聲
		    	var urlp = "/android_asset/www/css/images/plause.mp3";
		    	p_media = new Media(urlp,        
		     	function() {
		     	},        
		     	function(err) {
		     		//  console.log("Music Error: "+err);
		   		});

		    	// 開始
		    	var urls = "/android_asset/www/css/images/start.mp3";
		    	s_media = new Media(urls,        
			    function() {         
			    },        
			    function(err) {
			     //  console.log("Music Error: "+err);
			    });

		    	// 成功完成一次動作
		    	var urla = "/android_asset/www/css/images/again.mp3";
		    	a_media = new Media(urla,        
		     	function() {         
		     	},        
		     	function(err) {
		     		//  console.log("Music Error: "+err);
		   		});

		    	// 一組動作結束
		    	var urlf = "/android_asset/www/css/images/finish.mp3";
		    	f_media = new Media(urlf,        
		     	function() {         
		     	},        
		     	function(err) {
		     	//  console.log("Music Error: "+err);
		   		});

		    	// 錯誤動作
		    	var urle = "/android_asset/www/css/images/error.mp3";
		    	e_media = new Media(urle,        
		     	function() {         
		     	},        
		     	function(err) {
		     	//  console.log("Music Error: "+err);
		   		});	
		  	}

		  	var back_media = null;  //must be global variable so latter can be used by other function to stop
			//mus decide which music to play

			// 背景音樂
			function playback() {
			    var url = "/android_asset/www/css/images/marry.mp3";
			    back_media = new Media(url,        
			    function() {         
			    },        
			    function(err) {
			    });	

			}

			var backtimer;
			function loopback(){
				back_media.play();
			   	backtimer=setInterval(function() {
			   		back_media.seekTo(0);
			   		back_media.play();
			  	}, 112000);        
			}

			function stopback(){
				back_media.stop();
			   	back_media.seekTo(0);
			   	clearInterval(backtimer);    
			   	backtimer = null;
			}
		</script>

		<script type="text/javascript">
			function playvideo(url){
				openpopupvideo(url);
			}
			function openpopupvideo(url){
				$("#videoTag").empty();
			    $("#videoTag").append(
			      '<source src="' + url + '" type="video/ogv">'
			    );
			}
		</script>

		<!--處理自定義按鈕事件-->
   		<script type="text/javascript">
	    /*#登入按鈕*/
   			$(document).on('vmousedown', '#login_btn', function () {
				$('#login_img').attr('src', 'img/u12_mouseDown.png');
			});
			$(document).on('vmouseup', '#login_btn', function () {
				$('#login_img').attr('src', 'img/u12.png');
			});
			$(document).on('vmousecancel', '#login_btn', function () {
				$('#login_img').attr('src', 'img/u12.png');
			});
			$(document).on('vclick', '#login_btn', function () {
				addUserID();
			});

		/*#main_page 準備按鈕*/  
			$(document).on('vmousedown', '#ready_img', function () {
				$('#ready_img').attr('src', 'img/ready_mouseDown.png');
			});
			$(document).on('vmouseup', '#ready_img', function () {
				$('#ready_img').attr('src', 'img/ready.png');
			});
			$(document).on('vmousecancel', '#ready_img', function () {
				$('#ready_img').attr('src', 'img/ready.png');
			});
			$(document).on('vclick', '#ready_img', function () {
				get_detail();
			});

		/*#ready_page 開始按鈕*/  
			$(document).on('vmousedown', '#start_img', function () {
				if(more == false){
					$('#start_img').attr('src', 'css/ready/u31_mouseDown.png');
				}
			});
			$(document).on('vmouseup', '#start_img', function () {
				if(more == false){
					$('#start_img').attr('src', 'css/ready/u31.png');
				}
			});
			$(document).on('vmousecancel', '#start_img', function () {
				if(more == false){
					$('#start_img').attr('src', 'css/ready/u31.png');
				}
			});
			$(document).on('vclick', '#start_img', function (e) {	
				//checkConnectPebble();  //開始前系統檢查有沒有連接
				if(more == false){
					more = true;
					$('#start_img').attr('src', 'css/images/t3-1.png');
					var a = 3;
					var b = 2;
					countdownid = window.setInterval(countdownfunc, 333);
					function countdownfunc(){
						if(a == 0){
							document.getElementById("start_img").src = 'css/images/t1-3.png';	
						}else{
							document.getElementById("start_img").src = 'css/images/t' + a + '-' + b + '.png';
						}
						b++;
						if(b == 4){
							b = 1;
							a--;	
							if(a == -1){  //會有延遲
								clearInterval(countdownid);						
								$.mobile.changePage('#do-page', null, true, true);
								startWatch();  //手機
							}
						}
					};
				}
			});

		/*#ready_page 影片按鈕*/  
			$(document).on('vmousedown', '#video_img', function () {
				$('#video_img').attr('src', 'css/ready/u37_selected.png');
			});
			$(document).on('vmouseup', '#video_img', function () {
				$('#video_img').attr('src', 'css/ready/u37.png');
			});
			$(document).on('vmousecancel', '#video_img', function () {
				$('#video_img').attr('src', 'css/ready/u37.png');
			});
			$(document).on('vclick', '#video_img', function () {
				$('#video_img').attr('src', 'css/ready/u37_selected.png');
				$('#picture_img').attr('src', 'css/ready/u39.png');	
				$('.video_action').css('display', 'block');
				$('.img_action').css('display', 'none');
			});

		/*#ready_page 圖片按鈕*/  
			$(document).on('vmousedown', '#picture_img', function () {
				$('#picture_img').attr('src', 'css/ready/u39_selected.png');
			});
			$(document).on('vmouseup', '#picture_img', function () {
				$('#picture_img').attr('src', 'css/ready/u39.png');
			});
			$(document).on('vmousecancel', '#picture_img', function () {
				$('#picture_img').attr('src', 'css/ready/u39.png');
			});
			$(document).on('vclick', '#picture_img', function () {
				$('#picture_img').attr('src', 'css/ready/u39_selected.png');
				$('#video_img').attr('src', 'css/ready/u37.png');
				$('.video_action').css('display', 'none');
				$('.img_action').css('display', 'block');
			});

		/*返回鍵*/
			$(document).on('vmouseup', '.back', function () {
				$('.back img').attr('src', 'css/images/u24.png');
			});
			$(document).on('vmousedown', '.back', function () {
				$('.back img').attr('src', 'css/images/u24_mouseDown.png');
			});
			$(document).on('vmousecancel', '.back', function () {
				$('.back img').attr('src', 'css/images/u24.png');
			});
			$(document).on('vclick', '.back', function () {
				$.mobile.changePage("#main-page", null, true, true);
			});

		/*右上角問號鍵*/
			$(document).on('vmouseup', '.know img', function () {
				$('.know img').attr('src', 'css/ready/u23.png');
			});
			$(document).on('vmousedown', '.know img', function () {
				$('.know img').attr('src', 'css/ready/u23_mouseDown.png');
			});
			$(document).on('vmousecancel', '.know img', function () {
				$('.know img').attr('src', 'css/ready/u23.png');
			});
			$(document).on('vclick', '.know img', function () {
				alert("版本資訊:AnyWear 2.0");
			});

		/*#show-page 上傳鍵*/
			$(document).on('vmouseup', '#upload_btn img', function () {
				$('#upload_btn img').attr('src', 'img/u63.png');
			});
			$(document).on('vmousedown', '#upload_btn img', function () {
				$('#upload_btn img').attr('src', 'img/u63_mouseDown.png');
			});
			$(document).on('vmousecancel', '#upload_btn img', function () {
				$('#upload_btn img').attr('src', 'img/u63.png');
			});
			$(document).on('vclick', '#upload_btn img', function () {
				update();		
			});

		/*#show-page 再一次鍵*/
			$(document).on('vmouseup', '#again_btn img', function () {
				$('#again_btn img').attr('src', 'img/u65.png');
			});
			$(document).on('vmousedown', '#again_btn img', function () {
				$('#again_btn img').attr('src', 'img/u65_mouseDown.png');
			});
			$(document).on('vmousecancel', '#again_btn img', function () {
				$('#again_btn img').attr('src', 'img/u65.png');
			});
			$(document).on('vclick', '#again_btn img', function () {
				$.mobile.changePage('#do-page', null, true, true);
				startWatch();  //手機
			});

		/*#show-page 離開鍵*/
			$(document).on('vmouseup', '#leave_btn img', function () {
				$('#leave_btn img').attr('src', 'img/u67.png');
			});
			$(document).on('vmousedown', '#leave_btn img', function () {
				$('#leave_btn img').attr('src', 'img/u67_mouseDown.png');
			});
			$(document).on('vmousecancel', '#leave_btn img', function () {
				$('#leave_btn img').attr('src', 'img/u67.png');
			});
			$(document).on('vclick', '#leave_btn img', function () {
				$.mobile.changePage("#main-page", null, true, true);
			});

		/*#learn-page 右邊兩個icon*/
			$(document).on('vclick', '.leran_v', function () {
				$('.leran_v img').attr('src', 'css/learn/u37_selected.png');
				$('.leran_p img').attr('src', 'css/learn/u39.png');
				$('.leran_hand img').attr('src', 'css/learn/Icon_Hold_Normal.png');
				$('.leran_demo img').attr('src', 'css/learn/Icon_Demo_Normal.png');
				$('.movie_div').css('display', 'block');
				$('.hold_div').css('display', 'none');
				$('.demo_div').css('display', 'none');
			});
			$(document).on('vclick', '.leran_p', function () {
				$('.leran_v img').attr('src', 'css/learn/u37.png');
				$('.leran_p img').attr('src', 'css/learn/u39_selected.png');
				$('.leran_hand img').attr('src', 'css/learn/Icon_Hold_Down.png');
				$('.leran_demo img').attr('src', 'css/learn/Icon_Demo_Normal.png');
				$('.movie_div').css('display', 'none');
				$('.hold_div').css('display', 'block');
				$('.demo_div').css('display', 'none');
			});
			$(document).on('vclick', '.leran_hand', function () {
				$('.leran_v img').attr('src', 'css/learn/u37.png');
				$('.leran_p img').attr('src', 'css/learn/u39_selected.png');
				$('.leran_hand img').attr('src', 'css/learn/Icon_Hold_Down.png');
				$('.leran_demo img').attr('src', 'css/learn/Icon_Demo_Normal.png');
				$('.movie_div').css('display', 'none');
				$('.hold_div').css('display', 'block');
				$('.demo_div').css('display', 'none');
			});
			$(document).on('vclick', '.leran_demo', function () {
				$('.leran_v img').attr('src', 'css/learn/u37.png');
				$('.leran_p img').attr('src', 'css/learn/u39_selected.png');
				$('.leran_hand img').attr('src', 'css/learn/Icon_Hold_Normal.png');
				$('.leran_demo img').attr('src', 'css/learn/Icon_Demo_Down.png');
				$('.movie_div').css('display', 'none');
				$('.hold_div').css('display', 'none');
				$('.demo_div').css('display', 'block');
			});

		/*#track-page 上傳鍵*/
			$(document).on('vmouseup', '#uploadall_btn img', function () {
				$('#uploadall_btn img').attr('src', 'img/u63.png');
			});
			$(document).on('vmousedown', '#uploadall_btn img', function () {
				$('#uploadall_btn img').attr('src', 'img/u63_mouseDown.png');
			});
			$(document).on('vmousecancel', '#uploadall_btn img', function () {
				$('#uploadall_btn img').attr('src', 'img/u63.png');
			});
			$(document).on('vclick', '#uploadall_btn img', function () {
				uploadALL();	
			});
   		</script>

   		<!-- 測試程式 -->
   		<script type="text/javascript">
   			function showAcc(){
   				navigator.accelerometer.getCurrentAcceleration(function (acceleration){
					$("#test_p").append("[" + test_count++ + "]" + ".  x: " + acceleration.x + "  y: " + acceleration.y + "  z: " + acceleration.z + "<br>");
   				}
   				, function(){
   					alert("error");
   				});
   			}

   			function goBack(){
   				test_count = 1;
   				$("#test_p").html("");
   				$.mobile.changePage("#main-page", null, true, true);
   			}
   		</script>

   		<!-- 中風因子量表 -->
   		<script type="text/javascript">
   			var gender = 0;
   			
   			function gotoStrokeScale_male(){
   				gender = 1;
   				$.mobile.changePage("#strokeScale", null, true, true);
   			}
   			function gotoStrokeScale_female(){
   				gender = 0;
   				$.mobile.changePage("#strokeScale", null, true, true);
   			}
   			function doOutput()
			{
				var prob;
				var sum = 0, age = 0, sbp = 0, hyprx = 0, diabetes = 0, cigs = 0, cvd = 0, af = 0, lvh = 0;
				// 男性
				if (gender == 1) {
					var array = new Array("2.6","3.0","3.5","4.0","4.7","5.4","6.3","7.3","8.4",
							"9.7","11.2","12.9","14.8","17.0","19.5","22.4","25.5","29.0",
							"32.9","37.1","41.7","46.6","51.8","57.3","62.4","68.4","73.8",
							"79.0","83.7","87.9");
				};
				// 女性
				if (gender == 0) {
					var array = new Array("1.1","1.3","1.6","2.0","2.4","2.9","3.5","4.3","5.2",
									"6.3","7.6","9.2","11.1","13.3","16.0","19.1","22.8","27.0",
									"31.9","37.3","43.4","50.0","57.0","64.2","71.4","78.2","84.4");
				};
				var showtext="所評估之10年內中風機率為:";
				
				age = parseInt($('select#age').val());
				sbp = parseInt($('select#sbp').val());
				hyprx = parseInt($('select#hyprx').val());
				diabetes = parseInt($('select#diabetes').val());
				cigs = parseInt($('select#cigs').val());
				cvd = parseInt($('select#cvd').val());
				af = parseInt($('select#af').val());
				lvh = parseInt($('select#lvh').val());
				
				sum = age + sbp + hyprx + diabetes + cigs + cvd + af + lvh;

				if(sum <= 0)
				{
					showtext = "依目前篩選資料，您尚未符合高風險評估範圍，所以無法評估。";
					alert(showtext);
				
				}else{
					showtext = showtext + array[sum - 1] + "%";
					alert(showtext);
				}
			}
   		</script>
	</head>

	<body>
		<div data-role="page" > 
			<div data-role="content" id="newID">
      			<img src="css/login/Logo_login_i.png" id="login_p1">
      			<div id="input_div">    
	        		<input type="text" id="text_id" placeholder="收案代號" name="ID">
	        		<img src="css/login/people.png" id="in_people">
	      		</div>   
	      		<div id="login_btn" ><img src="img/u12.png" id="login_img"></div>
		      	<div id="ID_footer">
		      		<img src="img/u14.png" id="login_p2">
		    	</div>	
	    	</div>	    	
		</div> 

		<div data-role="page" id="main-page">
			<div data-role="header" id="start_header">
					<h1 >MedicalSuite</h1>
					<div class="know"><img src="css/images/u23.png"></div>
				<div data-role="navbar">
	     			<ul>
						<li>
						<a href="#" data-href="tab-1" class="ui-btn-active" data-icon="start"><p class="barp">開始</p></a>
						</li>
						<li><a href="#" data-href="tab-2" data-icon="train" ><p class="barp">教學</p></a>
						</li>
						<li><a href="#" data-href="tab-3" data-icon="record"><p class="barp">記錄</p></a>
						</li>
						<li><a onclick="self.location.href='ebook.html'" data-icon="ebook"><p class="barp">電子書</p></a>
						</li>
						<li><a href="#" data-href="tab-5" data-icon="scale"><p class="barp">中風因子</p></a>
						</li>
					</ul>
  				</div><!-- navbar -->
  				<div class="know"><img src="css/images/u23.png"></div>
  			</div><!-- header -->

  			<div class="tab-container">
				 <div id="tab-1" class="tab-page">
   					<div data-role="content" id="start_content">
   						<div data-role="navbar">
   							<ul>
								<li><a href="#"  data-href="tab-dolist" onclick="loadActionData()">本日復健動作列表</a></li>	
								<li><a href="#" data-href="tab-gg">自主復健</a></li>
							</ul>
							
		  				</div><!-- navbar -->
<!-- 	   						<a id ="dolist" href="#" data-href="tab-dolist" data-type="button" >本日復健動作列表</a>
   						<a id ="doself" href="#" data-href="tab-dolist" data-type="button" >本日復健動作列表</a> -->
<!-- 	   						<a href="#"> <button onclick="loadActionData()">本日復健動作列表</button> </a>
   						 <button><a href="#" data-href="tab-gg">自主復健</a></button>  -->
   						<!-- <input type="button" class="ui-btn-left" value ="本日復健動作列表"  onclick="loadActionData()">
   						<input type="button" data-href="tab-1" class="ui-btn-left" value ="自主復健"> -->
<!-- 	   						<button id ="dolist" data-href="tab-dolist">本日復健動作列表</button>
   						<button id = "doself" data-href="tab-1">自主復健</button> -->

   					</div>
   				</div>
  				<div id="tab-gg" class="tab-page">
   					<div data-role="content" id="start_content">
						<div class="detail">
							<div id="btext">
								<p id="main-text">請選擇動作次數</p>
							</div>
							<ul id="detail_ul">
								<li id="action_li">
									<img src="img/u35.png" class="detail_img">
									<label>動作</label>
									<select id="action-choice" name="action-choice" data-icon="Rarrow" onchange="changeFunc(value);">
										<option selected disabled>未選擇</option>
								        <option value="0">上舉</option>
								        <option value="1">下放</option>
								        <option value="2">摸耳朵</option>
								        <!--<option value="3">測試程式</option> -->
								        <option value="6">踢腿</option>
								        <option value="7">挺腹</option>
								        <option value="8">側抬腿</option>
								        <option value="9">重力球</option>
										<option value="10">側上斜舉</option>	
		          					</select>
								</li>
								<li id="times_li">
									<img src="img/u46.png" class="detail_img">
									<label>次數</label>
									<select id="times-choice" name="times-choice" data-icon="Rarrow">
										<option selected disabled>未選擇</option>
								        <option value="5">5</option>
								        <option value="10">10</option>
								        <option value="15">15</option>
								        <option value="20">20</option>
								        <option value="25">25</option>
								        <option value="30">30</option>
								        <option value="35">35</option>
								        <option value="40">40</option>
								        <option value="45">45</option>
								        <option value="50">50</option>
		          					</select>
								</li>
								<li id="degree_li">
									<img src="img/u57.png" class="detail_img">
									<label>角度</label>
									<select id="degree-choice" name="degree-choice" data-icon="Rarrow">
										<option selected disabled>未選擇</option>
								        <option value="90">90°</option>
								        <option value="120">120°</option>
								        <option value="180">180°</option>						         
		          					</select>
								</li>
								<li id="hand_choice">
									<img src="img/Icon_Hand.png" class="detail_img">
									<label>左右手</label>
									<select id="level-choice" name="level-choice" data-icon="Rarrow">
										<option selected disabled>未選擇</option>
								        <option value='R'>右手</option>
								        <option value='L'>左手</option>
		          					</select>
								</li>
								<li id="ear_li">
									<img src="img/u68.png" class="detail_img">
									<label>位置</label>
									<select id="ear-choice" name="ear-choice" data-icon="Rarrow">
										<option selected disabled>未選擇</option>
								        <option value='S'>肩膀</option>										
								        <option value='E'>耳朵</option>
		          					</select>
								</li>
							</ul>
						</div>
						<div class="btns">
							<img src="css/start/ready.png" id="ready_img">			
						</div>
					</div>
 				</div>
				<div id="tab-dolist" class="tab-page">
   					<div data-role="content">
   						<div id="glist">
   							<!-- <ul data-role="listview" data-inset="true" > 

							</ul> -->
   						</div>	
   					</div>
   				</div>
 				<!--learn -->
 				<div id="tab-2" class="tab-page">
   					<div data-role="content" id="learn_content">
   						<!-- navbar -->
     					<div data-role="navbar">
			     			<ul id="learn_ul">
								<li>
									<div class="bar_div leran_v"><img src="css/learn/u37.png" class="bar_img"><p>影片示範</p>
									</div>
								</li>
								<li>
									<div class="bar_div leran_p"><img src="css/learn/u39_selected.png" class="bar_img"><p>圖片示範</p>
									</div>
								</li>
								<li>
									<!--中間留空用(勿刪)-->
								</li>
								<li>
									<div class="bar_div leran_hand"><img src="css/learn/Icon_Hold_Down.png" class="bar_img"><p >握法</p>
									</div>
								</li>
								<li>
									<div class="bar_div leran_demo"><img src="css/learn/Icon_Demo_Normal.png" class="bar_img"><p>示範</p>
									</div>
								</li>
							</ul>
  						</div>
  						<div id="learn_container">
  							<div class=" movie_div"  style="display:none;">
  								<!--
  								<!--上肢正確示範-->
  								<a data-role="button" href="#videoWindow" data-rel="popup" data-position-to="window" data-transition="pop" onclick="playvideo('file:///android_asset/www/video/accurate_raise.mp4')">上舉示範影片</a>
  								<a data-role="button" href="#videoWindow" data-rel="popup" data-position-to="window" data-transition="pop" onclick="playvideo('file:///android_asset/www/video/accuraterear.ogv')" >下放示範影片</a>
								<a data-role="button" href="#videoWindow" data-rel="popup" data-position-to="window" data-transition="pop" onclick="playvideo('file:///android_asset/www/video/accuraterear.ogv')">耳朵示範影片</a>
								<!--上肢錯誤示範-->
								<a data-role="button" href="#videoWindow" data-rel="popup" data-position-to="window" data-transition="pop" onclick="playvideo('file:///android_asset/www/video/inaccurate_raise.mp4')">上舉錯誤示範影片</a>
								<a data-role="button" href="#videoWindow" data-rel="popup" data-position-to="window" data-transition="pop" onclick="playvideo('file:///android_asset/www/video/inaccurate_lower.mp4')">下放錯誤示範影片</a>
								<a data-role="button" href="#videoWindow" data-rel="popup" data-position-to="window" data-transition="pop" onclick="playvideo('file:///android_asset/www/video/inaccurate_ear.mp4')" >摸耳朵錯誤示範影片</a>
								<a data-role="button" href="#videoWindow" data-rel="popup" data-position-to="window" data-transition="pop" onclick="playvideo('file:///android_asset/www/video/accurate_kick.mp4')">踢腿示範影片</a>
								<a data-role="button" href="#videoWindow" data-rel="popup" data-position-to="window" data-transition="pop" onclick="playvideo('file:///android_asset/www/video/accurate_stomach.mp4')" >挺腹示範影片</a>
								<a data-role="button" href="#videoWindow" data-rel="popup" data-position-to="window" data-transition="pop" onclick="playvideo('file:///android_asset/www/video/accurate_leg.mp4')">側抬腿示範影片</a>
								<!--下肢錯誤示範-->
								<a data-role="button" href="#videoWindow" data-rel="popup" data-position-to="window" data-transition="pop" onclick="playvideo('file:///android_asset/www/video/inaccurate_kick.mp4')">踢腿錯誤示範影片</a>
  								<a data-role="button" href="#videoWindow" data-rel="popup" data-position-to="window" data-transition="pop" onclick="playvideo('file:///android_asset/www/video/inaccurate_leg.mp4')">側抬腿錯誤示範影片</a>
							</div>
  							<div class="flexslider hold_div">
								<ul class="slides">
									<li><img src="css/images/hand.png"/></li>
							  	</ul>
							</div>
  							<div class="flexslider demo_div" style="display:none;">
								<ul class="slides">
								    <li><img src="css/images/raise_angle.png"/></li>
								    <li><img src="css/images/lower.png"/></li>
								    <li><img src="css/images/ear.png"/></li>
								    <li><img src="css/images/raise.png"/></li>
							  	</ul>
							</div>
  						</div>
   					</div>
 				</div>

 				<!--Track-->
 				<div id="tab-3" class="tab-page">
   					<div data-role="content" id="track_content">
     					<ul data-role="listview" id="SoccerPlayerList">
						</ul>
 						<div id="uploadall_btn"><img src="img/u63.png" class="show_btns"></div>  
   					</div>
 				</div>

 				<!--e-book-->
 				<div id="tab-4" class="tab-page">
   					<div data-role="content" id="book_content">
     					<div class="imgdiv"><img src="css/images/hand.png"></div>
   					</div>
 				</div>

 				<!--Stroke Scale-->
 				<div id="tab-5" class="tab-page">
		            <div data-role="content">
		                <h1>
		                請選擇您的性別 :
		                </h1>
		                <h2>
		                </h2>
		                <div class="ui-grid-a">
		                    <div class="ui-block-a">
		                        <div style=" text-align:center">
		                            <img style="width: 60px; height: px" src="img/male-icon.png" />
		                        </div>
		                    </div>
		                    <div class="ui-block-b">
		                        <a data-role="button" data-transition="fade" onclick="gotoStrokeScale_male()" >
		                            男性
		                        </a>
		                    </div>
		                    <div class="ui-block-a">
		                        <div style=" text-align:center">
		                            <img style="width: 60px; height: px" src="img/female-icon.png" />
		                        </div>
		                    </div>
		                    <div class="ui-block-b">
		                        <a data-role="button" data-transition="fade"  onclick="gotoStrokeScale_female()" >
		                            女性
		                        </a>
		                    </div>
		                </div>
		            </div>
 				</div>
 			</div><!--tab-container-->

			<div data-role="popup" id="videoWindow" data-theme="a" data-overlay-theme="b" class="ui-content" style="max-width:340px; padding-bottom:2em;">
	        	<video id="videoTag" width="240" height="320" controls="controls"></video>
    		</div>
		</div><!--main-page-->
		<!--重力球 -->
		<div data-role="page" id="ball-page" >
			<div data-role="header" class="do-header">
				<!--返回鍵-->
				<div class="back"><img src="css/images/u24.png"></div>
				<!--動作標題-->
				<h1 class="action_h"></h1>
				<!--資訊鍵-->
				<div class="know"><img src="css/images/u23.png"></div>
			</div>
			<div data-role="content" id="ready-content">
	
				<canvas id="myCanvas" ></canvas>

			</div>
 		</div>
		<!--準備頁面-->
		<div data-role="page" id="ready-page">
			<div data-role="header" class="do-header">
				<!--返回鍵-->
				<div class="back"><img src="css/images/u24.png"></div>
				<!--動作標題-->
				<h1 class="action_h"></h1>
				<!--資訊鍵-->
				<div class="know"><img src="css/images/u23.png"></div>
			</div>
			<div data-role="content" id="ready-content">
				<div id="test_div"></div>
				<div class="process_div">
					<!--進度條-->
					<p class="f-times"></p><p class ="t-times"></p>
				</div>
				<p class="notice_p"></p><!--注意事項文字-->
				<video class="video_action" controls="controls" type="video/mp4" style="display:none;"></video>
				<img src="" class="img_action">
				<div class="btns">
					<img src="css/ready/u37.png" id="video_img">
					<img src="css/ready/u39_selected.png" id="picture_img">
					<img src="css/ready/u31.png" id="start_img">
					<!--img src="css/start/buletooth.png" id="bluetooth_img">
					<img src="css/start/sound.png" id="sound_img"-->			
				</div>
			</div>
		</div>

		<!--復健頁面-->
		<div data-role="page" id="do-page">
			<div data-role="header" class="do-header">
				<h1 class="action_h"></h1>
				<div class="know"><img src="css/images/u23.png"></div>
			</div>
			<div data-role="content" id="do-content">
				<div class="process_div">
					<p class="f-times"></p><p class ="t-times"></p>
				</div>
				<p class="notice_p"></p>
				<img src="" class="do_img">
				<p id="times"></p><!--正確次數-->				
				<p id="errortimes"></p><!--錯誤次數-->
				<!--p id="accelerometer">haha</p-->
			</div>

			<div data-role="footer" id="do-back">
				<div data-role="navbar" >
			   	<ul >
			    	<li><a name="a" onclick="ctheme(this.name)" id="a" class="d">點</a></li>
			      	<li><a name="b" onclick="ctheme(this.name)" id="b" class="d">我</a></li>
			      	<li><a name="c" onclick="ctheme(this.name)" id="c" class="d">返</a></li>
			      	<li><a name="d" onclick="ctheme(this.name)" id="d" class="d">回</a></li>  
			   	</ul>
			  	</div>
		   	</div> 
		</div>

		<!--結果頁面-->
		<div data-role="page" id="show-page">
			<div data-role="header" class="show-header">
				<div class="back"><img src="css/images/u24.png"></div>
				<h1 id="finish_h">完成</h1>
				<div class="know"><img src="css/images/u23.png"></div>
			</div>
			<div data-role="content" id="do-content">
				<div id="show_detail">
					<p id="show_date">2014 / 07/07 (Sat)</p>
					<ul>
						<li id="show_action">
							<img src="img/u35.png" class="show_img">
							<div>
								<p class="show_left">動作</p>
								<p class="show_right" id="f_action">上舉</p>
							</div>
						</li>
						<li id="show_times">
							<img src="img/u46.png" class="show_img">
							<div>
								<p class="show_left">次數</p>
								<p class="show_right"  id="f_times"></p>
							</div>
						</li>
						<li id="show_finish">
							<img src="img/u57.png" class="show_img">
							<div>
								<p class="show_left">角度</p>
								<p class="show_right" id="f_degree"></p>
							</div>
						</li>
						<li  id="show_error">
							<img src="img/u68.png" class="show_img">
							<div>
								<p class="show_left">位置</p>
								<p class="show_right" id="f_earlevel"></p>
							</div>
						</li>
					</ul>
				</div>
				<div id="show_point">
					<h1 id="congra">恭喜你!</br>完成了，今日的練習</h1>
					<img src="img/u9.png">
					<p id="get_point"></p>
				</div>
				<div id="upload_btn"><img src="img/u63.png" class="show_btns"><!--上傳-->
				</div>
				<div>
					<div id="again_btn"><img src="img/u65.png" class="show_btns"></div><!--再做一次-->
					<div id="leave_btn"><img src="img/u67.png" class="show_btns"></div><!--離開-->
				</div>
			</div>
		</div>

		<!-- 測試頁面 -->
		<div id="test-page" data-role="page">
			<button id="" onclick="showAcc()">顯示加速度</button>
			<button id="goBack" onclick="goBack()">返回首頁</button>
			<p id="test_p"></p>
		</div>

		<!-- 中風因子量表頁面 -->
		<div data-role="page" id="strokeScale">
 
			<div data-role="header">
				<h1>中風因子檢測量表</h1>
			</div>
			 
			<div data-role="content">
				<li>
				   Age(年紀)：
				   <select id="age" data-icon="Rarrow">
							 <option value="0">54-56</option>
							 <option value="1">57-59</option>
							 <option value="2">60-62</option>
							 <option value="3">63-65</option>
							 <option value="4">66-68</option>
							 <option value="5">69-71</option>
							 <option value="6">72-74</option>
							 <option value="7">75-77</option>
							 <option value="8">78-80</option>
							 <option value="9">80-83</option>
							 <option value="10">84-86</option>
					</select>
				</li>
				
				<li>
				   SBP(收縮壓)：
				   <select id="sbp" data-icon="Rarrow">
							 <option value="0">95-104</option>
							 <option value="1">105-114</option>
							 <option value="2">115-124</option>
							 <option value="3">125-134</option>
							 <option value="4">135-144</option>
							 <option value="5">145-154</option>
							 <option value="6">155-164</option>
							 <option value="7">165-174</option>
							 <option value="8">175-184</option>
							 <option value="9">185-194</option>
							 <option value="10">195-204</option>
					</select>
				</li>
				
				
				<li>
				   Hyp Rx(服降血壓藥之後的收縮壓)【無服藥則選：無服藥】：
				   <select id="hyprx" data-icon="Rarrow">
							 <option value="0">無服藥</option>
							 <option value="6">95-104</option>
							 <option value="5">105-114</option>
							 <option value="5">115-124</option>
							 <option value="4">125-134</option>
							 <option value="3">135-144</option>
							 <option value="3">145-154</option>
							 <option value="2">155-164</option>
							 <option value="1">165-174</option>
							 <option value="1">175-184</option>
							 <option value="0">185-194</option>
							 <option value="0">195-204</option>
					</select>			
				</li>
				
				<li>
				   Diabetes(糖尿病史):
				   <select id="diabetes" data-icon="Rarrow">
						 <option value="0">無</option>
						 <option value="3">有</option>
					</select>
				</li>
				
				<li>
				   Cigs(抽菸習慣)：
				   <select id="cigs" data-icon="Rarrow">
						 <option value="0">無</option>
						 <option value="3">有</option>
					</select>
				</li>
				
				<li>
				   CVD(心肌梗塞、心絞痛、冠狀動脈血液灌流不足、間歇性跛行、充血性心衰竭)：
				   <select id="cvd" data-icon="Rarrow">
						 <option value="0">無</option>
						 <option value="2">有</option>
					</select>
				</li>
				
				<li>
				   AF(心房顫震病史)：
				   <select id="af" data-icon="Rarrow">
						 <option value="0">無</option>
						 <option value="6">有</option>
					</select>
				</li>
				
				
				<li>
				   LVH(心電圖證實左心室肥大)：
				   <select id="lvh" data-icon="Rarrow">
						 <option value="0">無</option>
						 <option value="4">有</option>
					</select>
				</li>
				
				<br/>
				<br/>
				<br/>
				
				<input type="button" onclick="doOutput()" name="Submit" value="顯示評估結果">

				<br/>

				<input type="button" onclick="goBack()" value="Back">
				
		 	</div>
		</div>
	</body>
</html>